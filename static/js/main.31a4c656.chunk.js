(this["webpackJsonpmusic-scholars-annotator"]=this["webpackJsonpmusic-scholars-annotator"]||[]).push([[0],{204:function(e,t){e.exports="data:image/png;base64,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"},424:function(e,t,n){e.exports=n.p+"static/media/play-solid.f79fe6ae.svg"},431:function(e,t,n){e.exports=n(885)},446:function(e,t){},448:function(e,t){},457:function(e,t){},459:function(e,t){},485:function(e,t){},487:function(e,t){},488:function(e,t){},493:function(e,t){},495:function(e,t){},514:function(e,t){},526:function(e,t){},529:function(e,t){},556:function(e,t){},592:function(e,t){},593:function(e,t){},885:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(37),r=n.n(i),s=n(6),l=n(7),c=n(11),u=n(12),p=n(52),d=n(41),h=n(418),m=n(419),g=n.n(m),f=n(206),v=n(28),y=n(151),b=n(888),E=n(893),A=n(889),C=n(892),w=n(890),k=n(891),S=n(24),O=n(21),B=n(430),I=n(422),R=n(423),x=n(271),j=n(202),T=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={value:"",seconds:"",target:[],buttonStatus:"disabledSubmitButton"},e.onChange=function(t){return e.setState({value:t.target.value})},e.onTimeChange=function(t){return e.setState({seconds:t.target.value},(function(){return console.log(e.state.seconds)}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e={value:this.state.value,seconds:this.state.seconds};return o.a.createElement("div",null,"cueMedia"!==this.props.annotationType&&o.a.createElement("textarea",{className:"textArea",id:"annotationContent",name:"value",value:this.state.value,placeholder:this.props.placeholder,onChange:this.onChange}),"cueMedia"===this.props.annotationType&&o.a.createElement("div",null,o.a.createElement("input",{type:"text",value:this.state.value,name:"value",placeholder:"enter link here",onChange:this.onChange,className:"sizedTextBox"}),o.a.createElement("span",null," jump to: "),o.a.createElement("input",{type:"text",pattern:"[0-9]",placeholder:"seconds",name:"seconds",value:this.state.seconds,onChange:this.onTimeChange,className:"sizedTextBox"})),this.state.value&&o.a.createElement("button",{className:"enabledSubmitButton",title:"click to post your annotation to your solid POD"},o.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"arrow-alt-to-top",className:"svg-inline--fa fa-arrow-alt-to-top fa-w-12",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"1em",height:"1em",display:"inline-flex"},o.a.createElement("path",{fill:"white",d:"M48 336h51.6v96c0 26.5 21.5 48 48 48h88.6c26.5 0 48-21.5 48-48v-96h51.6c42.6 0 64.2-51.7 33.9-81.9l-143.9-144c-18.7-18.7-49.1-18.7-67.9 0l-144 144C-16 284.2 5.3 336 48 336zm144-192l144 144h-99.7v144h-88.6V288H48l144-144zM0 68V44c0-6.6 5.4-12 12-12h360c6.6 0 12 5.4 12 12v24c0 6.6-5.4 12-12 12H12C5.4 80 0 74.6 0 68z"})),o.a.createElement(j.a,{buttonContent:this.props.buttonContent,submitUri:this.props.submitUri,submitHandler:this.props.submitHandler,submitHandlerArgs:e,onResponse:this.props.onResponse})),!this.state.value&&o.a.createElement("button",{className:"disabledSubmitButton",title:"click to post your annotation to your solid POD"},o.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"file-import",className:"svg-inline--fa fa-file-import fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",display:"inline-flex"},o.a.createElement("path",{fill:"white",d:"M497.83 97.98L413.94 14.1c-9-9-21.2-14.1-33.89-14.1H175.99C149.5.1 128 21.6 128 48.09v215.98H12c-6.63 0-12 5.37-12 12v24c0 6.63 5.37 12 12 12h276v48.88c0 10.71 12.97 16.05 20.52 8.45l71.77-72.31c4.95-4.99 4.95-13.04 0-18.03l-71.77-72.31c-7.55-7.6-20.52-2.26-20.52 8.45v48.88H175.99V48.09h159.97v103.98c0 13.3 10.7 23.99 24 23.99H464v287.95H175.99V360.07H128v103.94c0 26.49 21.5 47.99 47.99 47.99h287.94c26.5 0 48.07-21.5 48.07-47.99V131.97c0-12.69-5.17-24.99-14.17-33.99zm-113.88 30.09V51.99l76.09 76.08h-76.09z"})),o.a.createElement(j.a,{buttonContent:"Select measures to begin",submitUri:this.props.submitUri,submitHandler:this.props.submitHandler,submitHandlerArgs:e,onResponse:this.props.onResponse})),o.a.createElement("span",null,o.a.createElement("button",{onClick:this.props.onRefreshClick,className:"refreshButton",title:"click to display the annotation contained in your solid POD"},o.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"redo-alt",className:"svg-inline--fa fa-redo-alt fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",display:"inline-flex"},o.a.createElement("path",{fill:"white",d:"M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z"})),o.a.createElement("span",null,""," Fetch Annotations"))))}}]),n}(o.a.Component),M=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).submitHandler=function(t){var n=t.value,a=t.seconds;switch(e.props.annotationType){case"describing":return{"@context":"http://www.w3.org/ns/anno.jsonld",target:e.props.selection.map((function(t){return{id:e.props.uri+"#"+t.getAttribute("id")}})),type:"Annotation",body:[{id:Object(x.a)(),type:"TextualBody",value:n}],motivation:"describing",created:(new Date).toISOString(),creator:e.props.creator};case"linking":return{"@context":"http://www.w3.org/ns/anno.jsonld",target:e.props.selection.map((function(t){return{id:e.props.uri+"#"+t.getAttribute("id")}})),type:"Annotation",body:[{id:n}],motivation:"linking",created:(new Date).toISOString(),creator:e.props.creator};case"cueMedia":return{"@context":"http://www.w3.org/ns/anno.jsonld",target:e.props.selection.map((function(t){return{id:e.props.uri+"#"+t.getAttribute("id")}})),type:"Annotation",body:[{id:n+"#t="+a}],motivation:"trompa:cueMedia",created:(new Date).toISOString(),creator:e.props.creator};case"image":return{"@context":"http://www.w3.org/ns/anno.jsonld",target:e.props.selection.map((function(t){return{id:e.props.uri+"#"+t.getAttribute("id")}})),type:"Annotation",body:[{id:n}],motivation:"trompa:cueImage",created:(new Date).toISOString(),creator:e.props.creator};case"replying":return{"@context":"http://www.w3.org/ns/anno.jsonld",target:e.props.replyAnnotationTargetId,type:"Annotation",body:[{id:Object(x.a)(),type:"TextualBody",value:n}],motivation:"replying",created:(new Date).toISOString(),creator:e.props.creator};default:console.log("no annotation found, have you selected the annotation type?")}},e}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"container"},o.a.createElement("h3",null,"Annotation type"),o.a.createElement("label",null,o.a.createElement("input",{title:"adds a textual content to the annotation",type:"radio",name:"annotationType",value:"describing",placeholder:"Add your annotation...",onChange:this.props.onAnnoTypeChange,checked:"describing"===this.props.annotationType}),"Describing"),o.a.createElement("label",null,o.a.createElement("input",{title:"links external resources to the annotation",type:"radio",value:"linking",name:"annotationType",placeholder:"Insert your URI link...",onChange:this.props.onAnnoTypeChange}),"Linking"),o.a.createElement("label",null,o.a.createElement("input",{title:"links a media content to the annotation",type:"radio",value:"cueMedia",name:"annotationType",onChange:this.props.onAnnoTypeChange}),"Cue Media"),o.a.createElement("label",null,o.a.createElement("input",{title:"links an image content to the annotation",type:"radio",value:"image",name:"annotationType",onChange:this.props.onAnnoTypeChange}),"Image"),o.a.createElement("label",null,o.a.createElement("input",{title:"links a media content to the annotation",type:"radio",value:"reply",name:"annotationType",disabled:!0,checked:"replying"===this.props.annotationType}),"Reply"),o.a.createElement("div",{className:"addAnnotations"},o.a.createElement(T,{annotationType:this.props.annotationType,submitUri:this.props.submitUri,placeholder:this.props.placeholder,submitHandler:this.submitHandler,onResponse:this.props.onResponse,onRefreshClick:this.props.onRefreshClick,buttonContent:this.props.buttonContent,selectorString:this.props.selectorString}))))}}]),n}(o.a.Component),N=function(e){var t=e.label,n=e.onClick;return o.a.createElement("span",null,o.a.createElement("label",null,o.a.createElement("input",{type:"checkbox",name:t.name,onClick:n,value:t.value,key:t.value}),t.name))},P=[{name:"Note",value:".note"},{name:"Measure",value:".measure"},{name:"Dynamics",value:".dynam"},{name:"Directives",value:".dir"}],H=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={selectorString:[]},e.createCheckbox=function(t){return o.a.createElement(N,{label:t,onClick:function(n){return e.updateSelectorList(n,t.value)},key:t.value})},e.buildCheckboxes=function(){return P.map(e.createCheckbox)},e}return Object(l.a)(n,[{key:"updateSelectorList",value:function(e,t){var n=this;e.target.checked?this.setState({selectorString:this.state.selectorString.concat([t])},(function(){n.props.handleStringChange(n.state.selectorString)})):this.setState({selectorString:this.state.selectorString.filter((function(e){return e!==t}))},(function(){n.props.handleStringChange(n.state.selectorString)}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h3",null,"Selection Type"),o.a.createElement("form",null,this.buildCheckboxes()))}}]),n}(a.Component),D=n(19),Q=n.n(D),W=n(203),U=n.n(W),L=n(43),F=n(424),q=n.n(F),z=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onClick=function(e){e.preventDefault(),e.stopPropagation();var t=a.props.annotation.target,n=a.props.annotation["@id"];a.props.onAnnoReplyHandler(t,n),console.log("reply target id",n)},a.onPlayClick=function(e){e.preventDefault(),e.stopPropagation();var t=a.props.annotation.body[0].id;a.props.onMediaClick(t)},a.onPreviewclick=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.closest(".rootAnno").children[0];!1===a.state.isPictureShowing?(a.setState({isPictureShowing:!0,previewButtonContent:"Hide preview"}),console.log(t),document.querySelector(".hiddenContainer").addEventListener("click",(function(e){e.stopPropagation()})),t.classList.remove("hiddenContainer"),t.classList.add("showContainer")):(document.querySelector(".showContainer").addEventListener("click",(function(e){e.stopPropagation()})),a.setState({isPictureShowing:!1,previewButtonContent:"show preview"}),t.classList.add("hiddenContainer"),t.classList.remove("showContainer"))},a.onShowReplyClick=function(e){e.preventDefault(),e.stopPropagation();var t=e.target.closest(".rootAnno");console.log("root anno",t);var n=document.querySelectorAll(".replyAnno");console.log(n),n.length?n.forEach((function(e){var n=e.dataset.replyAnnotationTarget,o=t.dataset.selfId;if(console.log("Reply target anno id: ",n),n===o)if(!1===a.props.areRepliesVisible||!1===a.state.isClicked){a.setState({isClicked:!0,showReplyButtonContent:"Hide replies"}),t.appendChild(e),a.props.showReplyHandler();var i=Array.from(t.getElementsByClassName("showReply"));i.forEach((function(e){return e.classList.add("hiddenReply")})),i.forEach((function(e){return e.classList.remove("showReply")}));var r=Array.from(t.getElementsByClassName("hiddenReply"));r.forEach((function(e){return e.classList.add("showReply")})),r.forEach((function(e){return e.classList.remove("hiddenReply")}))}else{a.setState({isClicked:!1,showReplyButtonContent:"Show replies"}),a.props.showReplyHandler();var s=document.querySelector(".listContainer"),l=Array.from(t.getElementsByClassName("showReply"));l.forEach((function(e){e.classList.add("hiddenReply"),s.appendChild(e)})),l.forEach((function(e){return e.classList.remove("showReply")}))}})):console.warn("no replies to show for this annotation")},a.renderSwitch=function(){var e,t;e=a.state.datasetWithAcl?Object(L.c)(a.state.datasetWithAcl).read?"public":Object.keys(Object(L.b)(a.state.datasetWithAcl))>1?"shared":"private":"unknown",a.state.userMayModifyAccess?"public"!==e?t=o.a.createElement(U.a,{checked:!1,onChange:a.grantPublic,icons:{unchecked:o.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"lock",className:"svg-inline--fa fa-lock fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512","vertical-align":"middle"},o.a.createElement("path",{fill:"white",d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}))}}):"public"===e&&(t=o.a.createElement(U.a,{checked:!0,onChange:a.revokePublic,icons:{checked:o.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"lock-open",className:"svg-inline--fa fa-lock-open fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},o.a.createElement("path",{fill:"white",d:"M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0z"}))}})):t=o.a.createElement("span",{className:"accessPermissions"},"User may ",o.a.createElement("b",null,"not")," modify access");var n=a.props.annotation.motivation,i=a.props.annotation.body[0].value,r=a.props.annotation.body[0].id,s=a.props.annotation.body[0].id,l=a.props.annotation.target[0].id,c=a.props.annotation.target,u=a.props.annotation.created,p=a.props.annotation.creator||"unknown",d=a.props.annotation["@id"];switch(n){case"describing":return o.a.createElement("div",{className:"rootAnno annoItem","data-target":l,"data-self-id":d}," ",o.a.createElement("p",null,"The textual content of this annotation is ",i),o.a.createElement("span",{className:"date"},"Created on: ",u," by ",p," with ",n," motivation."),o.a.createElement("span",{className:"permission"},"Access permissions: ",e,"."),o.a.createElement("p",null),"Set permissions: ",t,o.a.createElement("button",{className:"replyButton",name:"replyButton",onClick:a.onClick},"Reply"),o.a.createElement("button",{className:"showRepliesButton",name:"showRepliesButton",onClick:a.onShowReplyClick},a.state.showReplyButtonContent));case"linking":if(r.startsWith("http"))return o.a.createElement("div",{className:"rootAnno annoItem","data-target":l,"data-self-id":d},o.a.createElement("p",null,"The link of this annotation is ","",o.a.createElement("a",{href:r,onClick:"return false;",target:"_blank",rel:"noopener noreferrer"},r)),o.a.createElement("span",{className:"date"},"Created on: ",u," by ",p," with ",n," motivation"),o.a.createElement("span",{className:"permission"},"Access permissions: ",e,"."),o.a.createElement("p",null),"Set permissions: ",t,o.a.createElement("button",{className:"replyButton",name:"replyButton",onClick:a.onClick},"Reply"),o.a.createElement("button",{className:"showRepliesButton",name:"showRepliesButton",onClick:a.onShowReplyClick},a.state.showReplyButtonContent));var h="https://"+r;return o.a.createElement("div",{className:"rootAnno annoItem","data-target":l,"data-self-id":d},o.a.createElement("p",null,"The fixed link of this annotation is ","",o.a.createElement("a",{href:h,onClick:"return false;",target:"_blank",rel:"noopener noreferrer"},r)),o.a.createElement("span",{className:"date"},"Created on: ",u," by ",p," with ",n," motivation"),o.a.createElement("span",{className:"permission"},"Access permissions: ",e,"."),o.a.createElement("p",null),"Set permissions: ",t,o.a.createElement("button",{className:"replyButton",name:"replyButton",onClick:a.onClick},"Reply"),o.a.createElement("button",{className:"showRepliesButton",name:"showRepliesButton",onClick:a.onShowReplyClick},a.state.showReplyButtonContent));case"trompa:cueMedia":var m=s.split("#")[0];return o.a.createElement("div",{className:"rootAnno annoItem","data-target":l,"data-self-id":d}," ",o.a.createElement("p",null,"The mediacontent of this annotation is ",m," ",o.a.createElement("button",{className:"playButton",onClick:a.onPlayClick}," ",o.a.createElement("img",{src:q.a,alt:"",style:{width:"5px",alignContent:"center",textAlign:"center"}})," ","play"," ")),o.a.createElement("span",{className:"date"},"Created on: ",u," by ",p," with ",n," motivation"),o.a.createElement("span",{className:"permission"},"Access permissions: ",e,"."),o.a.createElement("p",null),"Set permissions: ",t,o.a.createElement("button",{className:"replyButton",name:"replyButton",onClick:a.onClick},"Reply"),o.a.createElement("button",{className:"showRepliesButton",name:"showRepliesButton",onClick:a.onShowReplyClick},a.state.showReplyButtonContent));case"trompa:cueImage":return o.a.createElement("div",{className:"rootAnno annoItem","data-target":l,"data-self-id":d}," ",o.a.createElement("div",{className:"hiddenContainer"},o.a.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer"},o.a.createElement("img",{title:"click for full res",src:s,alt:"annotation",style:{maxWidth:"240px",maxHeight:"135px",marginTop:"5px"}}))),o.a.createElement("p",null,"The mediacontent of this annotation is a picture, click the button to see a preview"," ",o.a.createElement("button",{onClick:a.onPreviewclick},a.state.previewButtonContent," ")),o.a.createElement("span",{className:"date"},"Created on: ",u," by ",p," with ",n," motivation"),o.a.createElement("span",{className:"permission"},"Access permissions: ",e,"."),o.a.createElement("p",null),"Set permissions: ",t,o.a.createElement("button",{className:"replyButton",name:"replyButton",onClick:a.onClick},"Reply"),o.a.createElement("button",{className:"showRepliesButton",name:"showRepliesButton",onClick:a.onShowReplyClick},a.state.showReplyButtonContent));case"replying":return o.a.createElement("div",{"data-reply-annotation-target":c,className:"replyAnno hiddenReply"},o.a.createElement("div",{className:"quoteContent"},o.a.createElement("p",null,"This reply contains: ",i),o.a.createElement("span",{className:"date"},"Created on: ",u," by ",p," with ",n," motivation")));default:return console.log("no motivation provided defaulting to plain text annotation",n),o.a.createElement("div",{className:"annoItem","data-target":l}," ",o.a.createElement("p",null,"The plain text content of this annotation is ",i),o.a.createElement("div",{className:"date"},"Created on: ",u," by ",p," with ",n," motivation"))}},a.state={isClicked:!1,userMayModifyAccess:!1,resourceAcl:null,aclModified:!1,datasetWithAcl:null,userId:null,isPictureShowing:!1,previewButtonContent:"Show preview",showReplyButtonContent:"Show replies"},a.onClick=a.onClick.bind(Object(O.a)(a)),a.grantPublic=a.grantPublic.bind(Object(O.a)(a)),a.revokePublic=a.revokePublic.bind(Object(O.a)(a)),a.updateDatasetAcl=a.updateDatasetAcl.bind(Object(O.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.updateDatasetAcl()}},{key:"updateDatasetAcl",value:function(){var e=this;Q.a.currentSession().then((function(t){Object(L.e)(e.props.annotation["@id"],{fetch:Q.a.fetch}).then((function(n){var a;if(console.log("Got dataset: ",n),Object(L.h)(n))a=Object(L.d)(n),e.setState({userMayModifyAccess:!0,datasetWithAcl:n,resourceAcl:a,aclModified:Date.now()}),console.log("Got resource ACL");else if(Object(L.f)(n)||console.warn("You do not have permission to modify access on ",e.props.annotation["@id"]),Object(L.g)(n)){a=Object(L.a)(n);var o=Object(L.j)(a,t.webId,{read:!0,append:!0,write:!0,control:!0});e.setState({userMayModifyAccess:!0,datasetWithAcl:n,resourceAcl:o,aclModified:Date.now()}),console.log("Creating ACL from fallback ACL")}else console.warn("You do not have permission to view access rights list on ",e.props.annotation["@id"])})).catch((function(t){return console.error("Couldn't get Solid dataset with ACL: ",e.props.annotation["@id"],t)}))})).catch((function(e){return console.error("Couldn't access the current Solid session: ",e)}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.aclModified!==t.aclModified}},{key:"grantPublic",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),Q.a.currentSession().then((function(e){var n=Object(L.k)(t.state.resourceAcl,{read:!0,append:!1,write:!1,control:!1});n=Object(L.j)(n,e.webId,{read:!0,append:!0,write:!0,control:!0}),Object(L.i)(t.state.datasetWithAcl,n,{fetch:Q.a.fetch}).then((function(){return t.updateDatasetAcl()})).catch((function(e){return console.error("Could not grant public access: ",e)}))}))}},{key:"revokePublic",value:function(e){var t=this;console.log("Revoking. Old acl: ",this.state.resourceAcl),e.stopPropagation(),e.preventDefault(),Q.a.currentSession().then((function(e){var n=Object(L.k)(t.state.resourceAcl,{read:!1,append:!1,write:!1,control:!1});n=Object(L.j)(n,e.webId,{read:!0,append:!0,write:!0,control:!0}),Object(L.i)(t.state.datasetWithAcl,n,{fetch:Q.a.fetch}).then((function(){return t.updateDatasetAcl()})).catch((function(e){return console.error("Could not revoke public access: ",e)}))}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"annoItemContainer"},this.renderSwitch())}}]),n}(o.a.Component),Z=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={order:"desc"},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.state.order,n=this.props.allEntries.filter((function(t){return e.props.filteringEntries.includes(t["@id"])})).sort((function(e,n){return("asc"===t?1:-1)*e.created.localeCompare(n.created)}));function a(e){e.preventDefault(),e.stopPropagation(),console.log("i am being clicked");var t=Array.from(e.currentTarget.classList).filter((function(e){return e.startsWith("focus-")}));t.length>1&&console.warn("Element with multiple focus Ids!",e.target),Array.from(document.getElementsByClassName("inFocus")).forEach((function(e){return e.classList.remove("inFocus")})),Array.from(document.getElementsByClassName(t[0])).forEach((function(e){return e.classList.add("inFocus")}))}return o.a.createElement("div",{className:"listContainer",id:"listContainer"},n.map((function(t){var n=t["@id"].substr(t["@id"].lastIndexOf("/")+1);return o.a.createElement("div",{className:"focus-"+n,onClick:a,key:t["@id"]},o.a.createElement(z,{annotation:t,onAnnoReplyHandler:e.props.onAnnoReplyHandler,onMediaClick:e.props.onMediaClick,replyAnnotationTarget:e.props.replyAnnotationTarget,showReplyHandler:e.props.showReplyHandler,areRepliesVisible:e.props.areRepliesVisible}))})))}}]),n}(o.a.Component),V=n(425),J=n.n(V),Y=n(426),G=n.n(Y),K=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).showReplyHandler=function(){a.setState({areRepliesVisible:!a.state.areRepliesVisible})},a.activateModal=function(){a.setState({helpWindowIsActive:!0})},a.deactivateModal=function(){a.setState({helpWindowIsActive:!1})},a.onAnnoTypeChange=function(e){return a.setState({annotationType:e.target.value,placeholder:e.target.placeholder,buttonContent:"Submit to your Solid POD"})},a.onMEIInputChange=function(e){a.setState({uri:e.target.value})},a.onSubmitMEI=function(){a.setState({isClicked:!0},(function(){a.hideMEIInput()}))},a.state={selection:[],annotationType:"describing",placeholder:"Add your annotation...",uri:"https://raw.githubusercontent.com/trompamusic-encodings/Mahler_Symphony_No4_Doblinger-4hands/master/Mahler_No4_1-Doblinger-4hands.mei",selectorString:"",buttonContent:"Submit to your Solid POD",replyAnnotationTarget:[],currentAnnotation:[],toggleAnnotationRetrieval:!1,hasContent:!0,isClicked:!1,showMEIInput:!0,currentMedia:a.props.currentMedia||"",seekTo:"",measuresToAnnotationsMap:{},annoToDisplay:[],helpWindowIsActive:!1,replyAnnotationTargetId:"",areRepliesVisible:!1,vrvOptions:{scale:45,adjustPageHeight:1,pageHeight:2500,pageWidth:2e3,footer:"none",unit:6}},a.handleSelectionChange=a.handleSelectionChange.bind(Object(O.a)(a)),a.handleScoreUpdate=a.handleScoreUpdate.bind(Object(O.a)(a)),a.handleStringChange=a.handleStringChange.bind(Object(O.a)(a)),a.onResponse=a.onResponse.bind(Object(O.a)(a)),a.onRefreshClick=a.onRefreshClick.bind(Object(O.a)(a)),a.onReceiveAnnotationContainerContent=a.onReceiveAnnotationContainerContent.bind(Object(O.a)(a)),a.onSubmitMEI=a.onSubmitMEI.bind(Object(O.a)(a)),a.onMEIInputChange=a.onMEIInputChange.bind(Object(O.a)(a)),a.hideMEIInput=a.hideMEIInput.bind(Object(O.a)(a)),a.onAnnoTypeChange=a.onAnnoTypeChange.bind(Object(O.a)(a)),a.onAnnoReplyHandler=a.onAnnoReplyHandler.bind(Object(O.a)(a)),a.convertCoords=a.convertCoords.bind(Object(O.a)(a)),a.activateModal=a.activateModal.bind(Object(O.a)(a)),a.deactivateModal=a.deactivateModal.bind(Object(O.a)(a)),a.onMediaClick=a.onMediaClick.bind(Object(O.a)(a)),a.showReplyHandler=a.showReplyHandler.bind(Object(O.a)(a)),a.handleAnnoShowingUpdate=a.handleAnnoShowingUpdate.bind(Object(O.a)(a)),a.zoomIn=a.zoomIn.bind(Object(O.a)(a)),a.zoomOut=a.zoomOut.bind(Object(O.a)(a)),a.player=o.a.createRef(),a}return Object(l.a)(n,[{key:"zoomIn",value:function(){var e=this.state.vrvOptions.scale,t=this.state.vrvOptions.pageHeight,n=this.state.vrvOptions.pageWidth,a=Object.assign({},this.state.vrvOptions);a.scale=e+5,a.pageHeight=t/65*a.scale,a.pageWidth=n/65*a.scale,console.log("ZOOM INCREASE",a.scale,"page w",a.pageWidth,"page h",a.pageHeight),this.setState({vrvOptions:a})}},{key:"zoomOut",value:function(){var e=this.state.vrvOptions.scale,t=this.state.vrvOptions.pageHeight,n=this.state.vrvOptions.pageWidth,a=Object.assign({},this.state.vrvOptions);a.scale=e-5,a.pageHeight=65*t/a.scale,a.pageWidth=65*n/a.scale,console.log("ZOOM DECREASE",a.scale,"page w",a.pageWidth,"page h",a.pageHeight),this.setState({vrvOptions:a})}},{key:"convertCoords",value:function(e){if(!document.getElementById(e.getAttribute("id"))||"none"===e.style.display||0===e.getBBox().x&&0===e.getBBox().y)return console.warn("Element unavailable on page: ",e.getAttribute("id")),{x:0,y:0,x2:0,y2:0};var t=e.getBBox().x,n=e.getBBox().width,a=e.getBBox().y,o=e.getBBox().height,i=e.closest("svg").parentElement.getBoundingClientRect(),r=e.getScreenCTM();return{x:r.a*t+r.c*a+r.e-i.left,y:r.b*t+r.d*a+r.f-i.top,x2:r.a*(t+n)+r.c*a+r.e-i.left,y2:r.b*t+r.d*(a+o)+r.f-i.top}}},{key:"handleStringChange",value:function(e){var t=this;this.setState({selectorString:e},(function(){return console.log(t.state.selectorString)}))}},{key:"handleSelectionChange",value:function(e){this.setState({selection:e})}},{key:"hideMEIInput",value:function(){this.setState({showMEIInput:!this.state.showMEIInput})}},{key:"onAnnoReplyHandler",value:function(e,t){this.setState({annotationType:"replying",placeholder:"you are replying to the selected annotation",buttonContent:"Reply to selected Solid annotation",replyAnnotationTarget:e,replyAnnotationTargetId:t})}},{key:"onResponse",value:function(e){var t=this;console.log(e),201===e.status?this.setState({toggleAnnotationRetrieval:!0},(function(){t.setState({toggleAnnotationRetrieval:!1,annotationType:"describing",replyAnnotationTarget:[],replyAnnotationTargetId:"",placeholder:"Add your annotation...",annoToDisplay:[]})})):404===e.status&&alert("folder not found, check your annotation container path!")}},{key:"onRefreshClick",value:function(){var e=this;!1!==this.state.hasContent&&this.setState({toggleAnnotationRetrieval:!0},(function(){e.setState({toggleAnnotationRetrieval:!1,annotationType:"describing",replyAnnotationTarget:[],replyAnnotationTargetId:"",placeholder:"Add your annotation...",annoToDisplay:[]})}))}},{key:"onMediaClick",value:function(e){var t=this;console.log("button click",e);var n=e.split("#")[0],a=e.split("#")[1].replace("t=","");console.log("Setting up seek to: ",n,a),this.setState({currentMedia:n},(function(){return t.player.current.seekTo(a)}))}},{key:"onReceiveAnnotationContainerContent",value:function(e){var t=this;e&&e.length||(alert("no annotation to retrieve"),Array.from(document.getElementsByClassName("inFocus")).forEach((function(e){return e.classList.remove("inFocus")})),document.querySelectorAll(".measureBox").forEach((function(e){return e.remove()})),document.querySelectorAll(".measureBoxBackground").forEach((function(e){return e.remove()})),this.setState({hasContent:!1},(function(){console.log(t.state.hasContent),t.setState({hasContent:!0})})));var n=(e=e.filter((function(e){return e["@id"].endsWith(".jsonld")}))).map((function(e){var t=[];if("replying"!==e.motivation){var n=e.target.map((function(e){var t=e.id,n=t.substr(t.lastIndexOf("#")),a=document.querySelector(n),o="";return a&&(o=a.closest(".measure")),o})).filter((function(e){return e}));t=Object(S.a)(new Set(n))}return{annoId:e["@id"],measures:t}})),a={};n.forEach((function(e){e.measures.forEach((function(t){var n=t.getAttribute("id");n in a?a[n].push(e.annoId):a[n]=[e.annoId]}))})),this.setState({currentAnnotation:e,measuresToAnnotationsMap:a},(function(){Array.from(document.getElementsByClassName("inFocus")).forEach((function(e){return e.classList.remove("inFocus")})),document.querySelectorAll(".measureBox").forEach((function(e){return e.remove()})),document.querySelectorAll(".measureBoxBackground").forEach((function(e){return e.remove()})),console.log("Mapped annotaitons ",a),console.log("current annotations ",e);var n=Object.keys(t.state.measuresToAnnotationsMap).filter((function(e){return document.querySelectorAll("#"+e).length}));console.log("Annotated measures on screen: ",n),n.forEach((function(n){var a=t.convertCoords(document.querySelector("#"+n));console.log("Coords: ",a);var o=document.createElement("div"),i=document.createElement("div"),r={left:Math.floor(a.x),top:Math.floor(a.y)-150,width:Math.ceil(a.x2-a.x),height:Math.ceil(a.y2-a.y)};console.log("Coords box: ",r),o.setAttribute("id","measureBox-"+n),o.setAttribute("class","measureBox"),o.setAttribute("style","position: absolute;background: rgba(0, 0, 0, 0);left: "+r.left+"px;top: "+r.top+"px;width: "+r.width+"px;height: "+r.height+"px;z-index: 1"),i.setAttribute("id","measureBoxBackground-"+n),i.setAttribute("class","measureBoxBackground"),i.classList.remove("isOpen"),i.classList.add("isClosed"),i.setAttribute("style","position: absolute;left: "+r.left+"px;top: "+r.top+"px;width: "+r.width+"px;height: "+r.height+"px;z-index: -1"),console.log("TRYING TO DRAW",o),document.querySelector(".annotationBoxesContainer").appendChild(o),document.querySelector(".annotationBoxesContainer").appendChild(i),o.onclick=function(a){Array.from(document.getElementsByClassName("inFocus")).forEach((function(e){return e.classList.remove("inFocus")}));var o=document.querySelectorAll(".measureBoxBackground"),i=a.target.closest(".measureBox");o.forEach((function(e){e.classList.add("isClosed"),e.classList.remove("isOpen");var t=e.id.split("measureBoxBackground-")[1];i.id.split("measureBox-")[1]===t&&(e.classList.remove("isClosed"),e.classList.add("isOpen"))}));var r=Array.from(document.getElementsByClassName("showReply"));if(console.log("no longer showing ",r),r.length){!0===t.state.areRepliesVisible&&t.setState({areRepliesVisible:!1});var s=document.querySelector(".listContainer");console.log(s),r.forEach((function(e){e.classList.add("hiddenReply"),s.appendChild(e)})),r.forEach((function(e){return e.classList.remove("showReply")}))}t.handleAnnoShowingUpdate(e,n)}}))})),console.log("iteration succeded"),e.forEach((function(e){"replying"!==e.motivation&&e.target.forEach((function(t){var n=e.body,a=t.id,o=a.substr(a.lastIndexOf("#")),i=document.querySelector(o);if(!i)return console.warn("no content has been found");var r=e["@id"],s=r.substr(r.lastIndexOf("/")+1);switch(e.motivation){case"describing":n.length&&"value"in n[0]&&i.classList.add("focus-"+s);break;case"linking":n.length&&(i.classList.add("focus-"+s),i.classList.add("focus-"+s));break;case"trompa:cueMedia":case"trompa:cueImage":n.length&&i.classList.add("focus-"+s);break;default:console.log("sorry, don't know what to do for this annotation boss")}}))}))}},{key:"handleAnnoShowingUpdate",value:function(e,t){var n=e.map((function(e){return e["@id"]})),a=this.state.measuresToAnnotationsMap[t],o=n.filter((function(e){return a.includes(e)})),i=[].concat(Object(S.a)(o),Object(S.a)(e.filter((function(e){return"replying"===e.motivation})).map((function(e){return e["@id"]}))));console.log("to display: ",i),this.setState({annoToDisplay:i})}},{key:"handleScoreUpdate",value:function(e){console.log("Received updated score DOM element: ",e)}},{key:"render",value:function(){var e=this,t=!!this.state.helpWindowIsActive&&o.a.createElement(G.a,{isOpen:this.state.helpWindowIsActive,onRequestClose:this.deactivateModal,contentLabel:"my modal",className:"mymodal",overlayClassName:"myoverlay",ariaHideApp:!1},o.a.createElement("div",null,o.a.createElement("header",{className:"modal-header"},o.a.createElement("h2",{className:"modal-title"},"This modal has a title")),o.a.createElement("div",{className:"modal-body"},o.a.createElement("p",null,"Subtitle"),o.a.createElement("div",{style:{height:200,overflow:"auto"}},o.a.createElement("h3",null,"Internally Scrolling Region"),o.a.createElement("p",null,"THIS IS A DEPLOYMENT TEST Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."))),o.a.createElement("footer",{className:"modal-footer"},o.a.createElement("button",{onClick:this.deactivateModal},"deactivate modal"))));return o.a.createElement("div",null,!0===this.state.isClicked&&o.a.createElement("div",{className:"score"},o.a.createElement("div",{className:"annotationBoxesContainer"}),o.a.createElement(B.a,{uri:this.state.uri,annotationContainerUri:this.props.submitUri,vrvOptions:this.state.vrvOptions,onSelectionChange:this.handleSelectionChange,selectorString:this.state.selectorString,onScoreUpdate:this.handleScoreUpdate,onReceiveAnnotationContainerContent:this.onReceiveAnnotationContainerContent,toggleAnnotationRetrieval:this.state.toggleAnnotationRetrieval}),o.a.createElement("div",{className:"prevPageButton"},o.a.createElement(R.a,{buttonContent:o.a.createElement("span",null,"Previous page"),uri:this.state.uri})),o.a.createElement("button",{onClick:this.zoomOut,style:{marginRight:"15px",position:"relative",bottom:"150px"}},"zoom out"),o.a.createElement("button",{onClick:this.zoomIn,style:{marginLeft:"15px",position:"relative",bottom:"150px"}},"zoom in"),o.a.createElement("div",{className:"nextPageButton"},o.a.createElement(I.a,{buttonContent:o.a.createElement("span",null,"Next page"),uri:this.state.uri}))),this.state.showMEIInput&&o.a.createElement("div",null,o.a.createElement("p",null,"Select your MEI file:"),o.a.createElement("input",{type:"text",onChange:this.onMEIInputChange,placeholder:"mahler four hands rendition...",className:"sizedTextBox"}),o.a.createElement("input",{title:"click to render the linked MEI file",className:"MEIButton",type:"button",onClick:this.onSubmitMEI,value:"render"})),o.a.createElement(H,{selectorString:this.state.selectorString,handleStringChange:this.handleStringChange}),o.a.createElement(M,{onAnnoTypeChange:this.onAnnoTypeChange,uri:this.state.uri,submitUri:this.props.submitUri,selection:this.state.selection,onResponse:this.onResponse,onRefreshClick:this.onRefreshClick,annotationType:this.state.annotationType,placeholder:this.state.placeholder,replyAnnotationTarget:this.state.replyAnnotationTarget,buttonContent:this.state.buttonContent,creator:this.props.userId,selectorString:this.state.selectorString,replyAnnotationTargetId:this.state.replyAnnotationTargetId,replyAnnoBody:this.state.replyAnnoBody}),o.a.createElement(Z,{allEntries:this.state.currentAnnotation,filteringEntries:this.state.annoToDisplay,onAnnoReplyHandler:this.onAnnoReplyHandler,onMediaClick:this.onMediaClick,replyAnnotationTarget:this.state.replyAnnotationTarget,showReplyHandler:this.showReplyHandler,areRepliesVisible:this.state.areRepliesVisible}),o.a.createElement("div",null,o.a.createElement("button",{onClick:this.activateModal,style:{padding:"5px",marginTop:"5px"}},"help"),t),o.a.createElement(J.a,{playing:!0,ref:this.player,url:this.state.currentMedia,controls:!0,onReady:function(){e.state.seekTo&&(console.log("Seeking to: ",e.state.seekTo),e.player.current.seekTo(Math.floor(e.state.seekTo)),e.setState({seekTo:""}))}}))}}]),n}(a.Component),X=n(204),_=n.n(X);function $(e){y.a.context.extend({trompa:"http://vocab.trompamusic.eu/vocab#"});var t=Object(b.a)("user.storage"),n=Object(b.a)("user"),i=Object(a.useState)("private/"),r=Object(v.a)(i,2),s=r[0],l=r[1];return o.a.createElement("div",{id:"authWrapper"},o.a.createElement(E.a,null,o.a.createElement("div",null,o.a.createElement("a",{href:"https://trompamusic.eu/",target:"_blank",rel:"noopener noreferrer"},o.a.createElement("img",{src:_.a,alt:"trompa logo"})),o.a.createElement("p",null,o.a.createElement(A.a,{className:"loginButton",popup:"auth-popup.html"},"Log in with Solid")))),o.a.createElement(C.a,null,o.a.createElement("a",{href:"https://trompamusic.eu/",target:"_blank",rel:"noopener noreferrer"},o.a.createElement("img",{src:_.a,alt:"trompa logo"})),o.a.createElement("h2",null,"Music scholars annotation tool"),o.a.createElement("p",null,"You are logged in as"," ",o.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},o.a.createElement(w.a,{src:"user.name"}))),o.a.createElement("p",{title:"close the current session and quit the app"},o.a.createElement(k.a,{className:"logoutButton"},"Log out")),o.a.createElement("p",null,"Specify the annotation container path inside your Pod:"),o.a.createElement("div",null,o.a.createElement("input",{title:"enter your preferred POD folder",type:"text",placeholder:"private/",onChange:function(e){e.target.value&&l(e.target.value)},className:"sizedTextBox"})),"undefined"!==typeof t?o.a.createElement(K,{uri:e.uri,podUri:"".concat(t),submitUri:"".concat(t)+s,userId:"".concat(n)}):o.a.createElement("div",null,"Loading... ")))}var ee=Object(d.a)(h.a,g.a)(d.d),te=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={MEI_URI:"Mahler.mei"},a.store=Object(d.d)(f.a),a}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement(p.a,{store:ee(f.a)},o.a.createElement($,{uri:this.state.MEI_URI,handleMEIInput:this.handleMEIInput,onChange:this.onChange,value:this.state.value}))}}]),n}(a.Component);r.a.render(o.a.createElement(te,null),document.querySelector(".container"))}},[[431,1,2]]]);
//# sourceMappingURL=main.31a4c656.chunk.js.map