{"version":3,"sources":["graphics/top-bar-logo_0_0.png","graphics/play-solid.svg","annotations/addAnnotation.js","annotations/annotationSubmitter.js","annotations/checkBox.js","annotations/selectionHandler.js","annotations/annotationItem.js","annotations/annotationList.js","containers/selectableScoreApp.js","containers/solidWrapper.js","containers/selectableScoreWrapper.js","index.js"],"names":["module","exports","Addannotation","state","value","seconds","target","buttonStatus","onChange","e","setState","onTimeChange","console","log","handlerArgs","this","props","annotationType","className","id","name","placeholder","type","pattern","title","aria-hidden","focusable","data-prefix","data-icon","role","xmlns","viewBox","width","height","display","fill","d","buttonContent","submitUri","submitHandler","submitHandlerArgs","onResponse","onClick","onRefreshClick","React","Component","AnnotationSubmitter","selection","map","elem","uri","getAttribute","body","uuidv4","motivation","created","Date","toISOString","creator","replyAnnotationTargetId","onAnnoTypeChange","checked","disabled","selectorString","Checkbox","label","key","Selectors","RadioButton","createCheckbox","option","updateSelectorList","buildCheckboxes","concat","handleStringChange","filter","val","AnnotationItem","preventDefault","stopPropagation","replyTarget","annotation","replyTargetId","onAnnoReplyHandler","onPlayClick","bodyMedia","onMediaClick","onPreviewclick","_children","closest","children","isPictureShowing","previewButtonContent","document","querySelector","addEventListener","classList","remove","add","onShowReplyClick","rootAnno","replyTargetAnnos","querySelectorAll","length","forEach","replyTargetAnno","replyTargetAnnoId","dataset","replyAnnotationTarget","rootAnnoTargetId","selfId","areRepliesVisible","isClicked","showReplyButtonContent","appendChild","showReplyHandler","noLongerShowing","Array","from","getElementsByClassName","noReplyShowing","showing","showingReply","annoContainer","warn","renderSwitch","permission","modifyPermissionsElement","datasetWithAcl","getPublicAccess","read","Object","keys","getAgentAccessAll","userMayModifyAccess","grantPublic","icons","unchecked","vertical-align","revokePublic","bodyD","bodyL","repTarget","date","data-target","data-self-id","startsWith","href","rel","appendURL","cleanMediaString","split","src","PlayLogo","alt","style","alignContent","textAlign","maxWidth","maxHeight","marginTop","data-reply-annotation-target","resourceAcl","aclModified","userId","bind","updateDatasetAcl","auth","currentSession","then","s","getSolidDatasetWithAcl","fetch","hasResourceAcl","getResourceAcl","now","hasAccessibleAcl","hasFallbackAcl","createAclFromFallbackAcl","userControllableResourceAcl","setAgentResourceAccess","webId","append","write","control","catch","error","nextProps","nextState","updatedAcl","setPublicResourceAccess","saveAclFor","AnnotationList","order","sortedFilteredAnno","allEntries","anno","filteringEntries","includes","sort","a","b","localeCompare","focusId","currentTarget","c","noFocusElement","focusElement","item","annoIdFragment","substr","lastIndexOf","SelectableScoreApp","activateModal","helpWindowIsActive","deactivateModal","onMEIInputChange","onSubmitMEI","hideMEIInput","currentAnnotation","toggleAnnotationRetrieval","hasContent","showMEIInput","currentMedia","seekTo","measuresToAnnotationsMap","annoToDisplay","vrvOptions","scale","adjustPageHeight","pageHeight","pageWidth","footer","unit","handleSelectionChange","handleScoreUpdate","onReceiveAnnotationContainerContent","convertCoords","handleAnnoShowingUpdate","zoomIn","zoomOut","player","createRef","initialZoom","initialHeight","initialWidth","newVrvOptions","assign","getElementById","getBBox","x","y","x2","y2","offset","parentElement","getBoundingClientRect","matrix","getScreenCTM","left","f","top","resp","status","alert","replace","current","content","mb","measuresToAnnotationsMapList","endsWith","distinctMeasures","measures","jsonTarget","targetId","fragment","element","measure","el","Set","annoId","newMap","measureToAnnoMap","m","mId","push","annotatedMeasuresOnScreen","measureId","coords","measureBox","createElement","measureBoxBackground","coordsBox","Math","floor","ceil","setAttribute","onclick","bgBoxes","frontBox","box","bgBoxId","bodies","_annoIds","jsonIds","_filteredAnnoIds","compare","annotationsToDisplay","scoreElement","modal","isOpen","onRequestClose","contentLabel","overlayClassName","ariaHideApp","overflow","marginRight","marginLeft","annotationContainerUri","onSelectionChange","onScoreUpdate","replyAnnoBody","padding","playing","ref","url","controls","onReady","SolidWrapper","data","context","extend","trompa","userPOD","useLDflexValue","useState","userInput","setUserInput","LoggedOut","Logo","LoginButton","popup","LoggedIn","Value","LogoutButton","podUri","createStoreWithMiddleware","applyMiddleware","thunk","ReduxPromise","createStore","SelectableScoreWrapper","MEI_URI","store","reducers","handleMEIInput","ReactDOM","render"],"mappings":"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","file":"static/js/main.0664490e.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQEAAAA1CAYAAABBcF7yAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAERVJREFUeNrsXWmMHEcVrh7fINnNjxAIItsOIIQ4dlaKkzg+dsY57MRRdvyHPyB2RgIUEGh3cwoRMTM/SEzsaHclRAQ5diYEhPjjseQoh4m313buiG0n4oyI286fhLOdPz4ST/FeT/VuT031NdM9M7uuJ5Wmp7vrelXvq/deHU2IJEmSJEmSJEmSJEmSJEmSJEmSJEmSLjlSlmKhzxa+pBKqpGldyRCaGiR1uKZK4eO/PaHLJpUkKRqt7PcCnrvjKhWwKk3qqQwI/SAKP6kTbQHC6FKFMkmSJAi00IXxz6gUhZymMgQFvp6CER4Enrr0Fur6lSRJ0tIFgQ/vu4yN8Aob4VMg/C6Bt4Ue/lBnmHcP+a3XUhmQJKmPQeCj4nrbhocAI3xqEIQerqm2IOCxjOxSNQhDt912G5pSaRaQhiFYEE6w/waGQ4cOmZJbEgTapvoDazONET7VsOFB4Kl7RFcUJrP+o3so6gBAQCBm4SeTBA9AiBSWRwl+ihGiWkwQTUrpHPzWnn76aauTsuzevVtTFCUPl6MQNI/XchxvDMi/CpeVqPkL+GoCPzYmBGotbejw3vUOPp+NmLSObQE8ONhJG0DeB3jeIk+hjIV+AYFUrMK/d1W6/uDqNGN4kahX5hRtm0Yu/1qL3PrJdNOFQhf+KzaAcPc70R0oTSx0kIcKIQMBhXYGwkkQ4vE2hV+FgCB0EtIrUhuMQ5cD23GS5V/qkK9au3UIqF+e8UrI+w7bGdPNudqg1A7/MQ1B2jl8tixBgCHe5IIcD36TkMFvkNSuvd7S7vXbBVOgT0FABAqTt9566yyE0B0H3k1DvHkm/J3mX4T05jHNDvhajFL+EPVTveqWQDu7eaBG6F95n/RyyxMEFDKwYGs65v7lX20Z0ZuFlkq7PhzhyDR7yy23BHZCeAe1iHkf1d9W0ZnK6w5+Km+a5Z9us/y2IMXFDEhrPKB+SVA6bBuwMo6286yvfAJ0f8qxpXTl7nqW3cMONgn/PyGIMg1CXgVZtu0v+uZT0NWOEXr2g4b8b9xCUoVDi+bDH/aR+uH9PqN7h/6C4EZCm3cu4DXejkbhqUbRNgRUDoi2AQLyme9saaae7gkAgBmPfE27jcDGfeaZZ0yP+BrLW+Q/wPKgEGQhvhGxzkjjEHfaK++wxMo45pNPmPJUIJwKaIOcgAfYBmjnZwPKmGag4QnqWI9OedENxyA29ASEEa4jWQgQAAR6k1px34dGwzG4piGo1ilC//cu3FCaBLf+2O1E2f1AO5pG8zoBZwqxTUyABqgEvbNr165hHgSeffbZUicgECY+5FtmplWeN7ngWQbS0AVxUFuY8XA2liHOVAieYPti+UqQnsipaQMBPMtCekZEECAMxLIdgndRAJBRQaAq4iFHEx48yMD9PMSv+OQ5FqJoY0y++tocQEYPohAwrcABgQL7bXYM/mwVre9dTQPt9au2EmXtBpdw0wT8BLGpnYE2ZxLxoYNZEArwfkWQRksH27lzJ6rbBwTvoqBmwwCAB1gNQRqWwKY9gHm24WvJQLxMu+2BcX1s7Ug+gbA8gHfLIh9HQLvzDkFsxxrvIFwKPgGVjYKmbZPuT5XYyJThzQa6b0VJIbRhZw5sJ8q2HxNlYNuCENtyfO4MoSeP22YBtU4TglpCi4w3+wgU8X3s2JVLYYHQc889JwLcnMcIqwo0Oc8RO6QQGGzk5v0FGok29cmXtV0q9qANSsxn0lR/ACTNA6hEptxBFvg0cn0NAqDuG+gLYP4AnTXAMFNjciD8sxDSDBTGQGJtsCAbBgjZ9AOCYNAk3u+9RepP3E7qj99OLj46Qup//F2YsdRg9huqTdl1j/1dWff434bWzfyl0AwOyTgVe6UJ8L4LPo2bb755AYjxWjDy4OhdgA5sxSAEuGZgj6Au45C3FqLOJj9lCPEiTxlCHNGUoJWkJuDXBmwaVfTuCF9G4GGNaQJ8eUf6XRMQAUOWjTCWy1FijzrKvR81bL23fk3IP094ju4+10zgqS3wa35+SlnzC3No7SPvFNb+8h9Ta3/1ti70EyxDc4BLQw+YhhwTPC8///zzRlx8gLT0sGqx4J2qAAiKN910U2i7Ht8VTAmaInMpIRAww4AAlFMTmQKMh5bAJMhH4UMvHIOtzNifoi71hjCfwRnbXHhoJaV1kMut9xNyJZgEEOzZAfO4l9MRAgW0UIzVD7+nE0mR6cYbb9QE5oF5+PDhqQSym2JaoOq2fZmPKIjwHfeqPWfKcCKkEI4risJrHWXS/WnCoHLmFKVlZKpyZkGej8O03b7XBBzb0AmjzAxAtc6t0mQpaAL0NzsJfWoXoe+/2Yir0IZKr5Dsyp/+V1n14H+GVu39d2HVQ/+aWrXv/Q4BgCbZqP2gCWR80hE9m06CFwAsFj/yojADEOWC6gxxdV6jwb7DQCwM0PHajg5pVpJ2DLrS0Dycrjzx5URANlw8rPFaBQPW/tME2GyACeq/ycwAy+0cgecWAwN8b1i556KCmoDt6T9zCoyF04TWFbLi/rNL2n/XjtDGGZ+l0bKw5IUXXtAd+1MQpZYgP6oM+N007M7Tq87oo4CfkwInYTYgT9GUYDksf5NqA95he8MNN+C6AB7UpgVp1TgepiGuBm1q9psmUCStc9Q8TTKNAEBhhaPqzXat9F2YQuy1JrBjx44ZwShU8xmhjCQ7E6RtCJxb6YA6D7O4Ihs+A3XM+NRfNCVYcYFg4poAlGFcoI2ZyAsunzFBHrWQTsaeaQMpNqqjl58XXkS0UeeZ4HmV2TfVhpOQZrrss2s2A5bZfGE2m1URADyA2D26pP1Gp4TIEPSVsDRBWqcbZwIGIzdZJHjFZWwEbVAirv0wvCbCEe+b0UWAfOTIEUPAw55NFa50dZy8wJEz6fNcI4tLS8usM1YbjbZ8zvxKwhwAAc/4RFGZeo2jn8hrPDU7O6v7pH+iCzyx/EDAj2cgABbUf5oTbg3ujUO9pjg+2VOCPADCe2aU9vF4ZzSgHexlwwL13gZBKENFUFbVxyEoMqvSHA9ykG6tVyBwgmkEaVwbwHwAOrP7TZ+OZbo6gAVyr4P8F5fT2X8J+QTaNZkMXdcn4rZ326jTCb+RK6hM0NFLmUyG35tQhHsVqJ8NMHAt2nCEz6ai1t/jnXyb1bdEPoyovhlm0vEaxkiS/pwgn8Ak98sza9IBCXt14P4UIl6FaQBZhuqAanS26z1SuWR2HlZIh2vuYwSBgRiS4acGm4TeY5fghAMSPSIcIIf4MgwPD2sCUKz4lRWemQKBz0NaXV8zsJKN+sIx29k5uNAwDb8AqlBZtnnIZPdt1Ui55yKYEBdJY/9At1WB5FYM9jI+43F5bm6uEjL9gS4wW+PytaLWGYSgBh1eJ81L0MfhnuPv4HcJGiIedGl2wGJ+mCkog0iwc4I8DoYo10EBeHR9zUCkxUIICq7FQm6yt2TSfSsoraeW1bEAPQQBHHUKR48eNQLSN7kRU+sCTzRBWSPXGd5DbWCeuz3DgE8N0BySBgGdCT9uNa9AO1g+6fOefQver4Uol2MSuOs61tcgAADgNhuGXOBQYiAwwjpEvlvHgjeySU7rSAIEjh071lTY7du348g6z3UGjfgf8uEFApkk+b1t2zZNAAJmOzxDgIP0Kpx9Lip/DXimxwwCWa80I/IjI+CHCvdpm+VKQ9w0lM3oGQi4VP4ys1kmXUhcZR0173rPUZcMkMW0olCVfuVbRIFAn9rZJb8AWdLaBwiDCQ1f5nwyyOcDbrD1oDlecCCtHHSipBxMGY8ydOIbyBH/8wEm+rj5RhNKs2sgkPJguOHqiA7KqWzmoOpS1yaY6mKx9xoqFK4YxH0Da9XkhV90HbMm0I3FQiC0U7jQh1+Es3Xr1lKQStnNhSce5/rp7fIM6o0Lj6Z9zgcowztmJ/yNY9mwiKBtvA4S7TTku4liIhBIk8W5asul6lkuNdVRQQfZr8ruZez4uJX49FFi/8ZA57+/UTv3vaty5+74XOncdz9fOvudL+TPfvuLWjeG/26uGMRltaJdelu2bPE81+/48eOGYIdbBuLEbhZAmnnBCkUdymB2wjOIX/LYpYcAMdUpf5MCAQYAagIgoAKvu7Z4SOQTGHQEn438ztmCGjtUxFH/LJeWUIF3J+i+1DzuCCRvPZm3zxeknQ3P5394ZQbSKBJcMEK5YX8Zzgy++OKLBjQ+mgVFrrPNXH/99dmXXnrJy0dQJtyqOzyhOCBOJIK07FOPBTvk4lq9N8HMn6Z7wBOrX9sL9xMI+LEnjC+H9yHwdWd7FWo9AQEUZo93NdY5daYtFBxfANtchB8VwU+JpTu10dk3CWcIbrGkSq8buqvxodOXQOBGSPNqsjTj/YRHnArEKXIOQue7AYU4AIA0FjipXH10ABk9Dp5BHWqQj+7yORiQdiUO/iaxoArKirzO8NOYUOZam+kZXJvnkO9xgXhUc8DfDF88VERlnWwSNQSmJZRDOLL8AeDOK1QAkVmFnz/1/AjJ8jEHAsyC8c2bN2cixslDnE6O8iIQHwV/Fv0TgvQn4uQZq0OWhT1x8TcJc8DjnMPpDtKr9so30MmhIo7vwIVe9lRd0XXdDjuK9odKQ3+BONnPFPdincDLL79sXHfddS1mAar8cH/olVdesQRxdI84ebiPbbQH4plRyoHx2OnFLT4JUIMLWM44eQbpmSTiBqheaQKircXAk07Ud3Tw8it2MY+ppEHA2UVIPRYBuWmWa6CG6389aEWoiWJYr3VUmAt3fUoDeR6XHyEhBAS2RMS79WYC4ohUaBTikyDUk9dee21gI+E78C7mMy8CAMwDBLZyqbYN8CZDWhdl1YAnbavuDAB5EEkzAO+KJpAl4Ta1tM754QzAegiXQVnfnSPkzOn2B2cFTADqNdL7XTfsseWiCbjVY9K6oi4HQpp79dVXax5AUIDntgYgeIzr8cfhucF8O2fYr6PRbWA2ud9HMyqQd6HbI28/aQIeB4wcjCFd0TLixNcMNG0gcq0IdLSDkutdi3gt6PgylPOTg0wwO/qsmBoSLLhfqn/syT9ZSXWyXh0qAsJmeBzuOXPNNdeoPvEKHvEW1h+gj4HN+c+y7xUU2b20T7xCEADEwbO4+RunTwD5LjrZGfhSiaEutV74BVIuFEN70r1lGCs1zA4UmW8RUBT8rx8h5PMjhDy8ohHenYunVBE/QqJ08ZCJbtNrr70mMgtUjy8N8fGyJJ5DRlBbGII0L1kTwCWootWNtZja2hKYc+qmTZsSXTPg7CIsCZ6dYmFAqFp+wPrWZWmhDNNF7SEKVRYdW82qv9KYE2g1AxRSWDfzZ72X6mbSqqiXWQCdI//6669XfDoV8mUjvkcaG1PSbQh/1S+PS9AcGBWkV42xPgcF8pbomgHP2QEEBnZugFgdwaXBCAQIAmvgtfMueV/8RmCkgq/e/5554a5PizzcIsIjzSbWPfHXSsKdbIJDfiti/App/XpNJAIhNK6++uohwQhkhoyPZahAGhqzOYddfgDVVS+DLB4iU3vjjTfMXvAsbv46n2Ljbhtt5lcmnOYJfIptEIK2qkE7ZVv7enLkO4fn+ipxK+FswOafNK5/v2PRFEDhh0DrigW/Q6kfXYjckS7ceUWO1JVJSlOa/TFTTLOeggbAXzvdabieWvfo2327mkySpKVCYUBgkjjbg0NBpS20Fghp1vlKcbt0fuyzaRB6DdJLQzBoPWWufeQdQzabJEm90QSMUDYlxS3FqYJy70dSWCVJWuogIACFHFk4T7CFUOinlbvrFclWSZKWKQi4wEAjzSumFjcRSZIkSZIkSZIkSZIkSZIkSZIkSZIkqe/p/wIMAMflv55Wc/6WAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/play-solid.f79fe6ae.svg\";","/* addAnnotation contains the submitButton component imported from the selectable score component, this handles the logic behind the POST to solid */\r\n/* also the input field changes based on the chosen annotation motivation*/\r\nimport React from \"react\";\r\nimport SubmitButton from \"selectable-score/lib/submit-button.js\";\r\n\r\nexport class Addannotation extends React.Component {\r\n  state = {\r\n    value: \"\",\r\n    seconds: \"\",\r\n    target: [],\r\n    buttonStatus: \"disabledSubmitButton\",\r\n  };\r\n  onChange = (e) => this.setState({ value: e.target.value });\r\n\r\n  onTimeChange = (e) =>\r\n    this.setState({ seconds: e.target.value }, () =>\r\n      console.log(this.state.seconds)\r\n    );\r\n\r\n  render() {\r\n    //packages the two states in one variable. The submithandlerArgs then are read with .value and .seconds from the submitHandler function\r\n    let value = this.state.value;\r\n    let seconds = this.state.seconds;\r\n    let handlerArgs = {\r\n      value,\r\n      seconds,\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        {this.props.annotationType !== \"cueMedia\" && (\r\n          <textarea\r\n            className=\"textArea\"\r\n            id=\"annotationContent\"\r\n            name=\"value\"\r\n            value={this.state.value}\r\n            placeholder={this.props.placeholder}\r\n            onChange={this.onChange}\r\n          />\r\n        )}\r\n        {this.props.annotationType === \"cueMedia\" && (\r\n          <div>\r\n            <input\r\n              type=\"text\"\r\n              value={this.state.value}\r\n              name=\"value\"\r\n              placeholder=\"enter link here\"\r\n              onChange={this.onChange}\r\n              className=\"sizedTextBox\"\r\n            />\r\n            <span> jump to: </span>\r\n            <input\r\n              type=\"text\"\r\n              pattern=\"[0-9]\"\r\n              placeholder=\"seconds\"\r\n              name=\"seconds\"\r\n              value={this.state.seconds}\r\n              onChange={this.onTimeChange}\r\n              className=\"sizedTextBox\"\r\n            />\r\n          </div>\r\n        )}\r\n        {this.state.value && (\r\n          <button\r\n            className=\"enabledSubmitButton\"\r\n            title=\"click to post your annotation to your solid POD\"\r\n          >\r\n            <svg\r\n              aria-hidden=\"true\"\r\n              focusable=\"false\"\r\n              data-prefix=\"far\"\r\n              data-icon=\"arrow-alt-to-top\"\r\n              className=\"svg-inline--fa fa-arrow-alt-to-top fa-w-12\"\r\n              role=\"img\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 384 512\"\r\n              width=\"1em\"\r\n              height=\"1em\"\r\n              display=\"inline-flex\"\r\n            >\r\n              <path\r\n                fill=\"white\"\r\n                d=\"M48 336h51.6v96c0 26.5 21.5 48 48 48h88.6c26.5 0 48-21.5 48-48v-96h51.6c42.6 0 64.2-51.7 33.9-81.9l-143.9-144c-18.7-18.7-49.1-18.7-67.9 0l-144 144C-16 284.2 5.3 336 48 336zm144-192l144 144h-99.7v144h-88.6V288H48l144-144zM0 68V44c0-6.6 5.4-12 12-12h360c6.6 0 12 5.4 12 12v24c0 6.6-5.4 12-12 12H12C5.4 80 0 74.6 0 68z\"\r\n              ></path>\r\n            </svg>\r\n\r\n            <SubmitButton\r\n              buttonContent={this.props.buttonContent}\r\n              submitUri={this.props.submitUri}\r\n              submitHandler={this.props.submitHandler}\r\n              submitHandlerArgs={handlerArgs}\r\n              onResponse={this.props.onResponse}\r\n            />\r\n          </button>\r\n        )}\r\n        {!this.state.value && (\r\n          <button\r\n            className=\"disabledSubmitButton\"\r\n            title=\"click to post your annotation to your solid POD\"\r\n          >\r\n            <svg\r\n              aria-hidden=\"true\"\r\n              focusable=\"false\"\r\n              data-prefix=\"far\"\r\n              data-icon=\"file-import\"\r\n              className=\"svg-inline--fa fa-file-import fa-w-16\"\r\n              role=\"img\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 512 512\"\r\n              width=\"1em\"\r\n              height=\"1em\"\r\n              display=\"inline-flex\"\r\n            >\r\n              <path\r\n                fill=\"white\"\r\n                d=\"M497.83 97.98L413.94 14.1c-9-9-21.2-14.1-33.89-14.1H175.99C149.5.1 128 21.6 128 48.09v215.98H12c-6.63 0-12 5.37-12 12v24c0 6.63 5.37 12 12 12h276v48.88c0 10.71 12.97 16.05 20.52 8.45l71.77-72.31c4.95-4.99 4.95-13.04 0-18.03l-71.77-72.31c-7.55-7.6-20.52-2.26-20.52 8.45v48.88H175.99V48.09h159.97v103.98c0 13.3 10.7 23.99 24 23.99H464v287.95H175.99V360.07H128v103.94c0 26.49 21.5 47.99 47.99 47.99h287.94c26.5 0 48.07-21.5 48.07-47.99V131.97c0-12.69-5.17-24.99-14.17-33.99zm-113.88 30.09V51.99l76.09 76.08h-76.09z\"\r\n              ></path>\r\n            </svg>\r\n\r\n            <SubmitButton\r\n              buttonContent=\"Select measures to begin\"\r\n              submitUri={this.props.submitUri}\r\n              submitHandler={this.props.submitHandler}\r\n              submitHandlerArgs={handlerArgs}\r\n              onResponse={this.props.onResponse}\r\n            />\r\n          </button>\r\n        )}\r\n        <span>\r\n          <button\r\n            onClick={this.props.onRefreshClick}\r\n            className=\"refreshButton\"\r\n            title=\"click to display the annotation contained in your solid POD\"\r\n          >\r\n            <svg\r\n              aria-hidden=\"true\"\r\n              focusable=\"false\"\r\n              data-prefix=\"fas\"\r\n              data-icon=\"redo-alt\"\r\n              className=\"svg-inline--fa fa-redo-alt fa-w-16\"\r\n              role=\"img\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 512 512\"\r\n              width=\"1em\"\r\n              height=\"1em\"\r\n              display=\"inline-flex\"\r\n            >\r\n              <path\r\n                fill=\"white\"\r\n                d=\"M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z\"\r\n              ></path>\r\n            </svg>\r\n\r\n            <span>{\"\"} Fetch Annotations</span>\r\n          </button>\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Addannotation;\r\n\r\n/* old */\r\n/* <button\r\n          style={{ padding: \"5px\", marginBottom: \"5px\" }}\r\n          onClick={() => this.setState({ visible: !visible })}\r\n        >\r\n          Toggle legend\r\n        </button>\r\n        {this.state.visible === true && (\r\n          <div>\r\n            <h4>Annotation legend</h4>\r\n\r\n            <span className=\"selectionLegend\" />\r\n            <span>currently selected</span>\r\n\r\n            <span className=\"descriptionLegend\" />\r\n            <span>descriptive annotation</span>\r\n\r\n            <span className=\"linkingLegend\" />\r\n            <span>linking annotation</span>\r\n\r\n            <span className=\"cueMediaLegend\" />\r\n            <span>cue media annotation</span>\r\n\r\n            <span className=\"replyLegend\" />\r\n            <span>replying annotation</span>\r\n\r\n            <span className=\"focusLegend\" />\r\n            <span>highlighted annotation</span>\r\n          </div>\r\n        )} */\r\n","/* annotation submitter takes the handlerArgs passed from the addAnnotaiton script and builds the jsonLd structure of each annotation based on its motivation */\r\n/* it also renders the radio button array to selecte the annotation motivation  */\r\nimport React from \"react\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport Addannotations from \"./addAnnotation.js\";\r\nexport class AnnotationSubmitter extends React.Component {\r\n  submitHandler = (handlerArgs) => {\r\n    //adds different annotations based on selection\r\n    //let replyAnnotationTargetId = this.props.replyAnnotationTargetId;\r\n    let value = handlerArgs.value;\r\n    let seconds = handlerArgs.seconds;\r\n\r\n    switch (this.props.annotationType) {\r\n      case \"describing\":\r\n        return {\r\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\r\n          target: this.props.selection.map((elem) => {\r\n            return { id: this.props.uri + \"#\" + elem.getAttribute(\"id\") };\r\n          }), //this takes the measure id selected by the user\r\n          type: \"Annotation\",\r\n          body: [{ id: uuidv4(), type: \"TextualBody\", value }], //this takes the user input\r\n          motivation: \"describing\",\r\n          created: new Date().toISOString(),\r\n          creator: this.props.creator,\r\n        };\r\n\r\n      case \"linking\":\r\n        return {\r\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\r\n          target: this.props.selection.map((elem) => {\r\n            return { id: this.props.uri + \"#\" + elem.getAttribute(\"id\") };\r\n          }), //this takes the measure id selected by the user\r\n          type: \"Annotation\",\r\n          body: [{ id: value }], //this takes the user URI\r\n          motivation: \"linking\",\r\n          created: new Date().toISOString(),\r\n          creator: this.props.creator,\r\n        };\r\n\r\n      case \"cueMedia\":\r\n        return {\r\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\r\n          target: this.props.selection.map((elem) => {\r\n            return { id: this.props.uri + \"#\" + elem.getAttribute(\"id\") };\r\n          }), //this takes the measure id selected by the user\r\n          type: \"Annotation\",\r\n          body: [{ id: value + \"#t=\" + seconds }], //this takes the user link + time offest\r\n          motivation: \"trompa:cueMedia\",\r\n          created: new Date().toISOString(),\r\n          creator: this.props.creator,\r\n        };\r\n\r\n      case \"image\":\r\n        return {\r\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\r\n          target: this.props.selection.map((elem) => {\r\n            return { id: this.props.uri + \"#\" + elem.getAttribute(\"id\") };\r\n          }), //this takes the measure id selected by the user\r\n          type: \"Annotation\",\r\n          body: [{ id: value }], //this takes the user image link\r\n          motivation: \"trompa:cueImage\",\r\n          created: new Date().toISOString(),\r\n          creator: this.props.creator,\r\n        };\r\n\r\n      case \"replying\":\r\n        return {\r\n          \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\r\n          target: this.props.replyAnnotationTargetId, //this takes the annotation ID being replied to\r\n          type: \"Annotation\",\r\n          body: [{ id: uuidv4(), type: \"TextualBody\", value }], //this takes the user input\r\n          motivation: \"replying\",\r\n          created: new Date().toISOString(),\r\n          creator: this.props.creator,\r\n        };\r\n\r\n      default:\r\n        console.log(\r\n          \"no annotation found, have you selected the annotation type?\"\r\n        );\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <div className=\"container\">\r\n          <h3>Annotation type</h3>\r\n          <label>\r\n            <input\r\n              title=\"adds a textual content to the annotation\"\r\n              type=\"radio\"\r\n              name=\"annotationType\"\r\n              value=\"describing\"\r\n              placeholder=\"Add your annotation...\"\r\n              onChange={this.props.onAnnoTypeChange}\r\n              checked={this.props.annotationType === \"describing\"}\r\n            />\r\n            Describing\r\n          </label>\r\n          <label>\r\n            <input\r\n              title=\"links external resources to the annotation\"\r\n              type=\"radio\"\r\n              value=\"linking\"\r\n              name=\"annotationType\"\r\n              placeholder=\"Insert your URI link...\"\r\n              onChange={this.props.onAnnoTypeChange}\r\n            />\r\n            Linking\r\n          </label>\r\n          <label>\r\n            <input\r\n              title=\"links a media content to the annotation\"\r\n              type=\"radio\"\r\n              value=\"cueMedia\"\r\n              name=\"annotationType\"\r\n              onChange={this.props.onAnnoTypeChange}\r\n            />\r\n            Cue Media\r\n          </label>\r\n          <label>\r\n            <input\r\n              title=\"links an image content to the annotation\"\r\n              type=\"radio\"\r\n              value=\"image\"\r\n              name=\"annotationType\"\r\n              onChange={this.props.onAnnoTypeChange}\r\n            />\r\n            Image\r\n          </label>\r\n          <label>\r\n            <input\r\n              title=\"links a media content to the annotation\"\r\n              type=\"radio\"\r\n              value=\"reply\"\r\n              name=\"annotationType\"\r\n              disabled={true}\r\n              checked={this.props.annotationType === \"replying\"}\r\n            />\r\n            Reply\r\n          </label>\r\n          <div className=\"addAnnotations\">\r\n            <Addannotations\r\n              annotationType={this.props.annotationType}\r\n              submitUri={this.props.submitUri}\r\n              placeholder={this.props.placeholder}\r\n              submitHandler={this.submitHandler}\r\n              onResponse={this.props.onResponse}\r\n              onRefreshClick={this.props.onRefreshClick}\r\n              buttonContent={this.props.buttonContent}\r\n              selectorString={this.props.selectorString}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AnnotationSubmitter;\r\n","/* simple checkbox component */\r\nimport React from 'react'\r\n\r\nconst Checkbox = ({ label, onClick }) => (\r\n  <span>\r\n    <label>\r\n      <input\r\n        type='checkbox'\r\n        name={label.name}\r\n        onClick={onClick}\r\n        value={label.value}\r\n        key={label.value}\r\n      />\r\n      {label.name}\r\n    </label>\r\n  </span>\r\n)\r\n\r\nexport default Checkbox\r\n","/* manages the rendering of the checkbox component mapping across the selectors const */\r\n/* and uses updateSelectorList to update the selectorString Prop passed from the selctableScore main app*/\r\n\r\nimport React, { Component } from \"react\";\r\nimport Checkbox from \"./checkBox\";\r\nconst Selectors = [\r\n  {\r\n    name: \"Note\",\r\n    value: \".note\",\r\n  },\r\n\r\n  {\r\n    name: \"Measure\",\r\n    value: \".measure\",\r\n  },\r\n\r\n  {\r\n    name: \"Dynamics\",\r\n    value: \".dynam\",\r\n  },\r\n\r\n  {\r\n    name: \"Directives\",\r\n    value: \".dir\",\r\n  },\r\n];\r\n\r\nexport default class RadioButton extends Component {\r\n  state = {\r\n    selectorString: [],\r\n  };\r\n\r\n  updateSelectorList(e, value) {\r\n    if (e.target.checked) {\r\n      //append to array\r\n      this.setState(\r\n        {\r\n          selectorString: this.state.selectorString.concat([value]),\r\n        },\r\n        () => {\r\n          this.props.handleStringChange(this.state.selectorString);\r\n        }\r\n      );\r\n    } else {\r\n      //remove from array\r\n      this.setState(\r\n        {\r\n          selectorString: this.state.selectorString.filter(function (val) {\r\n            return val !== value;\r\n          }),\r\n        },\r\n        () => {\r\n          this.props.handleStringChange(this.state.selectorString);\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  createCheckbox = (option) => (\r\n    <Checkbox\r\n      label={option}\r\n      onClick={(e) => this.updateSelectorList(e, option.value)}\r\n      key={option.value}\r\n    />\r\n  );\r\n\r\n  buildCheckboxes = () => Selectors.map(this.createCheckbox);\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h3>Selection Type</h3>\r\n        <form>{this.buildCheckboxes()}</form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/* item that contains the annotation contents, the renderSwitch function assign specific display to the specfic anntation based on its motivation*/\r\nimport React from \"react\";\r\nimport auth from \"solid-auth-client\";\r\nimport Toggle from \"react-toggle\";\r\nimport {\r\n  getSolidDatasetWithAcl,\r\n  hasResourceAcl,\r\n  hasFallbackAcl,\r\n  hasAccessibleAcl,\r\n  // eslint-disable-next-line\r\n  createAcl,\r\n  createAclFromFallbackAcl,\r\n  getResourceAcl,\r\n  setAgentResourceAccess,\r\n  setPublicResourceAccess,\r\n  saveAclFor,\r\n  // eslint-disable-next-line\r\n  getSolidDataset,\r\n  getPublicAccess,\r\n  getAgentAccessAll,\r\n} from \"@inrupt/solid-client\";\r\n\r\nimport PlayLogo from \"../graphics/play-solid.svg\";\r\nclass AnnotationItem extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isClicked: false,\r\n      userMayModifyAccess: false,\r\n      resourceAcl: null,\r\n      aclModified: false,\r\n      datasetWithAcl: null,\r\n      userId: null,\r\n      isPictureShowing: false,\r\n      previewButtonContent: \"Show preview\",\r\n      showReplyButtonContent: \"Show replies\",\r\n    };\r\n    this.onClick = this.onClick.bind(this);\r\n    this.grantPublic = this.grantPublic.bind(this);\r\n    this.revokePublic = this.revokePublic.bind(this);\r\n    this.updateDatasetAcl = this.updateDatasetAcl.bind(this);\r\n  }\r\n  onClick = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const replyTarget = this.props.annotation.target;\r\n    const replyTargetId = this.props.annotation[\"@id\"];\r\n    this.props.onAnnoReplyHandler(replyTarget, replyTargetId);\r\n    console.log(\"reply target id\", replyTargetId);\r\n  };\r\n  componentDidMount() {\r\n    this.updateDatasetAcl();\r\n  }\r\n\r\n  updateDatasetAcl() {\r\n    auth\r\n      .currentSession()\r\n      .then((s) => {\r\n        getSolidDatasetWithAcl(this.props.annotation[\"@id\"], {\r\n          fetch: auth.fetch,\r\n        })\r\n          .then((datasetWithAcl) => {\r\n            console.log(\"Got dataset: \", datasetWithAcl);\r\n            let resourceAcl;\r\n            if (!hasResourceAcl(datasetWithAcl)) {\r\n              if (!hasAccessibleAcl(datasetWithAcl)) {\r\n                console.warn(\r\n                  \"You do not have permission to modify access on \",\r\n                  this.props.annotation[\"@id\"]\r\n                );\r\n              }\r\n              if (!hasFallbackAcl(datasetWithAcl)) {\r\n                console.warn(\r\n                  \"You do not have permission to view access rights list on \",\r\n                  this.props.annotation[\"@id\"]\r\n                );\r\n              } else {\r\n                resourceAcl = createAclFromFallbackAcl(datasetWithAcl);\r\n                // ensure current user has control in the new ACL\r\n                const userControllableResourceAcl = setAgentResourceAccess(\r\n                  resourceAcl,\r\n                  s.webId,\r\n                  { read: true, append: true, write: true, control: true }\r\n                );\r\n                this.setState({\r\n                  userMayModifyAccess: true,\r\n                  datasetWithAcl,\r\n                  resourceAcl: userControllableResourceAcl,\r\n                  aclModified: Date.now(),\r\n                });\r\n                console.log(\"Creating ACL from fallback ACL\");\r\n              }\r\n            } else {\r\n              resourceAcl = getResourceAcl(datasetWithAcl);\r\n              this.setState({\r\n                userMayModifyAccess: true,\r\n                datasetWithAcl,\r\n                resourceAcl,\r\n                aclModified: Date.now(),\r\n              });\r\n              console.log(\"Got resource ACL\");\r\n            }\r\n          })\r\n          .catch((e) =>\r\n            console.error(\r\n              \"Couldn't get Solid dataset with ACL: \",\r\n              this.props.annotation[\"@id\"],\r\n              e\r\n            )\r\n          );\r\n      })\r\n      .catch((e) =>\r\n        console.error(\"Couldn't access the current Solid session: \", e)\r\n      );\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (this.state.aclModified !== nextState.aclModified) {\r\n      // user has enacted an ACL change. Request a re-render accordingly.\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  onPlayClick = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const bodyMedia = this.props.annotation.body[0].id;\r\n    this.props.onMediaClick(bodyMedia);\r\n  };\r\n\r\n  onPreviewclick = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    const aimAt = e.target.closest(\".rootAnno\");\r\n    const _children = aimAt.children[0];\r\n\r\n    //const aimAt = rootAnno.contains(\"hiddenContainer\");\r\n    if (this.state.isPictureShowing === false) {\r\n      this.setState({\r\n        isPictureShowing: true,\r\n        previewButtonContent: \"Hide preview\",\r\n      });\r\n      console.log(_children);\r\n      document\r\n        .querySelector(\".hiddenContainer\")\r\n        .addEventListener(\"click\", function (e) {\r\n          e.stopPropagation();\r\n        });\r\n      _children.classList.remove(\"hiddenContainer\");\r\n      _children.classList.add(\"showContainer\");\r\n    } else {\r\n      document\r\n        .querySelector(\".showContainer\")\r\n        .addEventListener(\"click\", function (e) {\r\n          e.stopPropagation();\r\n        });\r\n      this.setState({\r\n        isPictureShowing: false,\r\n        previewButtonContent: \"show preview\",\r\n      });\r\n      _children.classList.add(\"hiddenContainer\");\r\n      _children.classList.remove(\"showContainer\");\r\n    }\r\n  };\r\n\r\n  onShowReplyClick = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const rootAnno = e.target.closest(\".rootAnno\");\r\n    console.log(\"root anno\", rootAnno);\r\n    const replyTargetAnnos = document.querySelectorAll(\".replyAnno\");\r\n    console.log(replyTargetAnnos);\r\n    /* chunk of proto code that is probably useful for the end goal */\r\n    // const testRoot = document.querySelectorAll(\".rootAnno\");\r\n    // const replyTest = document.querySelectorAll(\".replyAnno\");\r\n    // const _test = [testRoot, replyTest];\r\n    // const filterRoot = [];\r\n    // const filterReply = [];\r\n    // for (var i = 0; i < replyTest.length; i++) {\r\n    //   filterReply.push(replyTest[i].dataset.replyAnnotationTarget);\r\n    // }\r\n    // for (var i = 0; i < testRoot.length; i++) {\r\n    //   filterRoot.push(testRoot[i].dataset.target);\r\n    // }\r\n    // console.log(_test);\r\n    // const targetCollection = testRoot.forEach(\r\n    //   (target) => target.item.dataset.target\r\n    // );\r\n    // const replyTargetAnnoArray = Array.from(\r\n    //   document.querySelector(\".replyAnno\")\r\n    // );\r\n    // const originAnno = Array.from(document.querySelector(\".rootAnno\"));\r\n    // const filteredResults = filterReply.filter((target) =>\r\n    //   filterRoot.includes(target)\r\n    // );\r\n\r\n    // console.log(targetCollection, \"reply\", replyTest);\r\n\r\n    //////////// NEEDS TO WIPE TARGET REPLY AFTER RPELYING TO IT ALSO THE ANNOTATION TYPE HANDLING IS MESSY //////////////////\r\n\r\n    if (replyTargetAnnos.length) {\r\n      replyTargetAnnos.forEach((replyTargetAnno) => {\r\n        const replyTargetAnnoId = replyTargetAnno.dataset.replyAnnotationTarget;\r\n\r\n        const rootAnnoTargetId = rootAnno.dataset.selfId;\r\n\r\n        console.log(\"Reply target anno id: \", replyTargetAnnoId);\r\n        if (replyTargetAnnoId === rootAnnoTargetId) {\r\n          if (\r\n            this.props.areRepliesVisible === false ||\r\n            this.state.isClicked === false\r\n          ) {\r\n            this.setState({\r\n              isClicked: true,\r\n              showReplyButtonContent: \"Hide replies\",\r\n            });\r\n            rootAnno.appendChild(replyTargetAnno);\r\n            this.props.showReplyHandler();\r\n            //creates an array of all the visible replies\r\n            const noLongerShowing = Array.from(\r\n              rootAnno.getElementsByClassName(\"showReply\")\r\n            );\r\n            //hides them\r\n            noLongerShowing.forEach((noReplyShowing) =>\r\n              noReplyShowing.classList.add(\"hiddenReply\")\r\n            );\r\n            noLongerShowing.forEach((noReplyShowing) =>\r\n              noReplyShowing.classList.remove(\"showReply\")\r\n            );\r\n            //creates an array of the hidden annotations\r\n            const showing = Array.from(\r\n              rootAnno.getElementsByClassName(\"hiddenReply\")\r\n            );\r\n            //shows them\r\n            showing.forEach((showingReply) =>\r\n              showingReply.classList.add(\"showReply\")\r\n            );\r\n            showing.forEach((showingReply) =>\r\n              showingReply.classList.remove(\"hiddenReply\")\r\n            );\r\n          } else {\r\n            this.setState({\r\n              isClicked: false,\r\n              showReplyButtonContent: \"Show replies\",\r\n            });\r\n            this.props.showReplyHandler();\r\n            const annoContainer = document.querySelector(\".listContainer\");\r\n            const noLongerShowing = Array.from(\r\n              rootAnno.getElementsByClassName(\"showReply\")\r\n            );\r\n            //hides them\r\n            noLongerShowing.forEach((noReplyShowing) => {\r\n              noReplyShowing.classList.add(\"hiddenReply\");\r\n              annoContainer.appendChild(noReplyShowing);\r\n            });\r\n            noLongerShowing.forEach((noReplyShowing) =>\r\n              noReplyShowing.classList.remove(\"showReply\")\r\n            );\r\n          }\r\n          //appendichild is where the magic happens\r\n        }\r\n        // } else {\r\n        //   //if only one anno has replies and the other button is clicked, hides all the replies and alerts the user\r\n        //   // const noLongerShowing = Array.from(\r\n        //   //   rootAnno.getElementsByClassName(\"showReply\")\r\n        //   // );\r\n        //   // noLongerShowing.forEach((noReplyShowing) =>\r\n        //   //   noReplyShowing.classList.add(\"hiddenReply\")\r\n        //   // );\r\n        //   // noLongerShowing.forEach((noReplyShowing) =>\r\n        //   //   noReplyShowing.classList.remove(\"showReply\")\r\n        //   // );\r\n        //   console.warn(\"no replies to show for this annotation\");\r\n        // }\r\n      });\r\n    } else console.warn(\"no replies to show for this annotation\");\r\n  };\r\n\r\n  grantPublic(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    auth.currentSession().then((s) => {\r\n      let updatedAcl = setPublicResourceAccess(this.state.resourceAcl, {\r\n        read: true,\r\n        append: false,\r\n        write: false,\r\n        control: false,\r\n      });\r\n      // ensure current user has control in the new ACL\r\n      updatedAcl = setAgentResourceAccess(updatedAcl, s.webId, {\r\n        read: true,\r\n        append: true,\r\n        write: true,\r\n        control: true,\r\n      });\r\n      saveAclFor(this.state.datasetWithAcl, updatedAcl, { fetch: auth.fetch })\r\n        .then(() => this.updateDatasetAcl())\r\n        .catch((e) => console.error(\"Could not grant public access: \", e));\r\n    });\r\n  }\r\n\r\n  revokePublic(e) {\r\n    console.log(\"Revoking. Old acl: \", this.state.resourceAcl);\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    auth.currentSession().then((s) => {\r\n      let updatedAcl = setPublicResourceAccess(this.state.resourceAcl, {\r\n        read: false,\r\n        append: false,\r\n        write: false,\r\n        control: false,\r\n      });\r\n      // ensure current user has control in the new ACL\r\n      updatedAcl = setAgentResourceAccess(updatedAcl, s.webId, {\r\n        read: true,\r\n        append: true,\r\n        write: true,\r\n        control: true,\r\n      });\r\n\r\n      saveAclFor(this.state.datasetWithAcl, updatedAcl, { fetch: auth.fetch })\r\n        .then(() => this.updateDatasetAcl())\r\n        .catch((e) => console.error(\"Could not revoke public access: \", e));\r\n    });\r\n  }\r\n\r\n  renderSwitch = () => {\r\n    /* determine permission state of annotation in Solid Pod */\r\n    let permission;\r\n    let modifyPermissionsElement;\r\n\r\n    if (this.state.datasetWithAcl) {\r\n      if (getPublicAccess(this.state.datasetWithAcl).read)\r\n        permission = \"public\";\r\n      else if (Object.keys(getAgentAccessAll(this.state.datasetWithAcl)) > 1)\r\n        /* declare it as shared if it has any access info for more than one (assumed to be user)\r\n         * TODO check assumptions...\r\n         */\r\n        permission = \"shared\";\r\n      else permission = \"private\";\r\n    } else {\r\n      permission = \"unknown\";\r\n    }\r\n\r\n    // Logic to toggle public access on and off\r\n    // TODO allow sharing with individual agents using setAgentResourceAccess\r\n    if (!this.state.userMayModifyAccess) {\r\n      modifyPermissionsElement = (\r\n        <span className=\"accessPermissions\">\r\n          User may <b>not</b> modify access\r\n        </span>\r\n      );\r\n    } else {\r\n      if (permission !== \"public\") {\r\n        modifyPermissionsElement = (\r\n          <Toggle\r\n            checked={false}\r\n            onChange={this.grantPublic}\r\n            icons={{\r\n              unchecked: (\r\n                <svg\r\n                  aria-hidden=\"true\"\r\n                  focusable=\"false\"\r\n                  data-prefix=\"fas\"\r\n                  data-icon=\"lock\"\r\n                  className=\"svg-inline--fa fa-lock fa-w-14\"\r\n                  role=\"img\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 576 512\"\r\n                  vertical-align=\"middle\"\r\n                >\r\n                  <path\r\n                    fill=\"white\"\r\n                    d=\"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z\"\r\n                  ></path>\r\n                </svg>\r\n              ),\r\n            }}\r\n          />\r\n        );\r\n      } else if (permission === \"public\") {\r\n        modifyPermissionsElement = (\r\n          <Toggle\r\n            checked={true}\r\n            onChange={this.revokePublic}\r\n            icons={{\r\n              checked: (\r\n                <svg\r\n                  aria-hidden=\"true\"\r\n                  focusable=\"false\"\r\n                  data-prefix=\"fas\"\r\n                  data-icon=\"lock-open\"\r\n                  className=\"svg-inline--fa fa-lock-open fa-w-18\"\r\n                  role=\"img\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 576 512\"\r\n                >\r\n                  <path\r\n                    fill=\"white\"\r\n                    d=\"M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0z\"\r\n                  ></path>\r\n                </svg>\r\n              ),\r\n            }}\r\n          />\r\n          // <button\r\n          //   className=\"changeAccess\"\r\n          //   name=\"changeAccess\"\r\n          //   onClick={this.revokePublic}\r\n          // >\r\n          //   Revoke public access\r\n          // </button>\r\n        );\r\n      }\r\n    }\r\n    //stuff that i am carrying around: the annotation's ID you are replying to, the body (currently sits under annotation.source) and the annotation's specific ID\r\n    const motivation = this.props.annotation.motivation;\r\n    const bodyD = this.props.annotation.body[0].value;\r\n    const bodyL = this.props.annotation.body[0].id;\r\n    const bodyMedia = this.props.annotation.body[0].id;\r\n    const target = this.props.annotation.target[0].id;\r\n    const repTarget = this.props.annotation.target;\r\n    const date = this.props.annotation.created;\r\n    const creator = this.props.annotation.creator || \"unknown\";\r\n    const selfId = this.props.annotation[\"@id\"];\r\n    // const originAnno = document.querySelectorAll(\"div[data-self-id]\");\r\n    // const innerBodyString = this.props.annotation.source;\r\n    // const selfIdData = selfId.dataset.selfId;\r\n    // const rootAnnoTargetIdData = rootAnnoTargetId.dataset.rootAnnotationId;\r\n\r\n    switch (motivation) {\r\n      case \"describing\":\r\n        return (\r\n          <div\r\n            className=\"rootAnno annoItem\"\r\n            data-target={target}\r\n            data-self-id={selfId}\r\n          >\r\n            {\" \"}\r\n            <p>The textual content of this annotation is {bodyD}</p>\r\n            <span className=\"date\">\r\n              Created on: {date} by {creator} with {motivation} motivation.\r\n            </span>\r\n            <span className=\"permission\">\r\n              Access permissions: {permission}.\r\n            </span>\r\n            <p></p>\r\n            Set permissions: {modifyPermissionsElement}\r\n            <button\r\n              className=\"replyButton\"\r\n              name=\"replyButton\"\r\n              onClick={this.onClick}\r\n            >\r\n              Reply\r\n            </button>\r\n            <button\r\n              className=\"showRepliesButton\"\r\n              name=\"showRepliesButton\"\r\n              onClick={this.onShowReplyClick}\r\n            >\r\n              {this.state.showReplyButtonContent}\r\n            </button>\r\n          </div>\r\n        );\r\n      case \"linking\":\r\n        if (bodyL.startsWith(\"http\")) {\r\n          return (\r\n            <div\r\n              className=\"rootAnno annoItem\"\r\n              data-target={target}\r\n              data-self-id={selfId}\r\n            >\r\n              <p>\r\n                The link of this annotation is {\"\"}\r\n                {\r\n                  <a\r\n                    href={bodyL}\r\n                    onClick=\"return false;\"\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                  >\r\n                    {bodyL}\r\n                  </a>\r\n                }\r\n              </p>\r\n              <span className=\"date\">\r\n                Created on: {date} by {creator} with {motivation} motivation\r\n              </span>\r\n              <span className=\"permission\">\r\n                Access permissions: {permission}.\r\n              </span>\r\n              <p></p>\r\n              Set permissions: {modifyPermissionsElement}\r\n              <button\r\n                className=\"replyButton\"\r\n                name=\"replyButton\"\r\n                onClick={this.onClick}\r\n              >\r\n                Reply\r\n              </button>\r\n              <button\r\n                className=\"showRepliesButton\"\r\n                name=\"showRepliesButton\"\r\n                onClick={this.onShowReplyClick}\r\n              >\r\n                {this.state.showReplyButtonContent}\r\n              </button>\r\n            </div>\r\n          );\r\n        } else {\r\n          const appendURL = \"https://\" + bodyL;\r\n          return (\r\n            <div\r\n              className=\"rootAnno annoItem\"\r\n              data-target={target}\r\n              data-self-id={selfId}\r\n            >\r\n              <p>\r\n                The fixed link of this annotation is {\"\"}\r\n                {\r\n                  <a\r\n                    href={appendURL}\r\n                    onClick=\"return false;\"\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                  >\r\n                    {bodyL}\r\n                  </a>\r\n                }\r\n              </p>\r\n              <span className=\"date\">\r\n                Created on: {date} by {creator} with {motivation} motivation\r\n              </span>\r\n              <span className=\"permission\">\r\n                Access permissions: {permission}.\r\n              </span>\r\n              <p></p>\r\n              Set permissions: {modifyPermissionsElement}\r\n              <button\r\n                className=\"replyButton\"\r\n                name=\"replyButton\"\r\n                onClick={this.onClick}\r\n              >\r\n                Reply\r\n              </button>\r\n              <button\r\n                className=\"showRepliesButton\"\r\n                name=\"showRepliesButton\"\r\n                onClick={this.onShowReplyClick}\r\n              >\r\n                {this.state.showReplyButtonContent}\r\n              </button>\r\n            </div>\r\n          );\r\n        }\r\n\r\n      case \"trompa:cueMedia\":\r\n        const cleanMediaString = bodyMedia.split(\"#\")[0];\r\n        return (\r\n          <div\r\n            className=\"rootAnno annoItem\"\r\n            data-target={target}\r\n            data-self-id={selfId}\r\n          >\r\n            {\" \"}\r\n            <p>\r\n              The mediacontent of this annotation is {cleanMediaString}{\" \"}\r\n              <button className=\"playButton\" onClick={this.onPlayClick}>\r\n                {\" \"}\r\n                <img\r\n                  src={PlayLogo}\r\n                  alt=\"\"\r\n                  style={{\r\n                    width: \"5px\",\r\n                    alignContent: \"center\",\r\n                    textAlign: \"center\",\r\n                  }}\r\n                ></img>{\" \"}\r\n                play{\" \"}\r\n              </button>\r\n            </p>\r\n            <span className=\"date\">\r\n              Created on: {date} by {creator} with {motivation} motivation\r\n            </span>\r\n            <span className=\"permission\">\r\n              Access permissions: {permission}.\r\n            </span>\r\n            <p></p>\r\n            Set permissions: {modifyPermissionsElement}\r\n            <button\r\n              className=\"replyButton\"\r\n              name=\"replyButton\"\r\n              onClick={this.onClick}\r\n            >\r\n              Reply\r\n            </button>\r\n            <button\r\n              className=\"showRepliesButton\"\r\n              name=\"showRepliesButton\"\r\n              onClick={this.onShowReplyClick}\r\n            >\r\n              {this.state.showReplyButtonContent}\r\n            </button>\r\n          </div>\r\n        );\r\n      case \"trompa:cueImage\":\r\n        return (\r\n          <div\r\n            className=\"rootAnno annoItem\"\r\n            data-target={target}\r\n            data-self-id={selfId}\r\n          >\r\n            {\" \"}\r\n            <div className=\"hiddenContainer\">\r\n              <a href={bodyMedia} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                <img\r\n                  title=\"click for full res\"\r\n                  src={bodyMedia}\r\n                  alt=\"annotation\"\r\n                  style={{\r\n                    maxWidth: \"240px\",\r\n                    maxHeight: \"135px\",\r\n                    marginTop: \"5px\",\r\n                  }}\r\n                />\r\n              </a>\r\n            </div>\r\n            <p>\r\n              The mediacontent of this annotation is a picture, click the button\r\n              to see a preview{\" \"}\r\n              <button onClick={this.onPreviewclick}>\r\n                {this.state.previewButtonContent}{\" \"}\r\n              </button>\r\n            </p>\r\n            <span className=\"date\">\r\n              Created on: {date} by {creator} with {motivation} motivation\r\n            </span>\r\n            <span className=\"permission\">\r\n              Access permissions: {permission}.\r\n            </span>\r\n            <p></p>\r\n            Set permissions: {modifyPermissionsElement}\r\n            <button\r\n              className=\"replyButton\"\r\n              name=\"replyButton\"\r\n              onClick={this.onClick}\r\n            >\r\n              Reply\r\n            </button>\r\n            <button\r\n              className=\"showRepliesButton\"\r\n              name=\"showRepliesButton\"\r\n              onClick={this.onShowReplyClick}\r\n            >\r\n              {this.state.showReplyButtonContent}\r\n            </button>\r\n          </div>\r\n        );\r\n      case \"replying\":\r\n        return (\r\n          <div\r\n            data-reply-annotation-target={repTarget}\r\n            className=\"replyAnno hiddenReply\"\r\n          >\r\n            <div className=\"quoteContent\">\r\n              <p>This reply contains: {bodyD}</p>\r\n              <span className=\"date\">\r\n                Created on: {date} by {creator} with {motivation} motivation\r\n              </span>\r\n              {/* <button\r\n                className=\"replyButton\"\r\n                name=\"replyButton\"\r\n                onClick={this.onClick}\r\n              >\r\n                Reply\r\n              </button>\r\n              <button\r\n                className=\"showRepliesButton\"\r\n                name=\"showRepliesButton\"\r\n                onClick={this.onShowReplyClick}\r\n              >\r\n                {this.state.showReplyButtonContent}\r\n              </button> */}\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        console.log(\r\n          \"no motivation provided defaulting to plain text annotation\",\r\n          motivation\r\n        );\r\n        return (\r\n          <div className=\"annoItem\" data-target={target}>\r\n            {\" \"}\r\n            <p>The plain text content of this annotation is {bodyD}</p>\r\n            <div className=\"date\">\r\n              Created on: {date} by {creator} with {motivation} motivation\r\n            </div>\r\n            {/* <button\r\n              className=\"replyButton\"\r\n              name=\"replyButton\"\r\n              onClick={this.onClick}\r\n            >\r\n              Reply\r\n            </button>\r\n            <button\r\n              className=\"showRepliesButton\"\r\n              name=\"showRepliesButton\"\r\n              onClick={this.onShowReplyClick}\r\n            >\r\n              Show replies\r\n            </button> */}\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return <div className=\"annoItemContainer\">{this.renderSwitch()}</div>;\r\n  }\r\n}\r\n\r\nexport default AnnotationItem;\r\n","/* annotationList is the annotationItem container. Filters the annotations in order to render only the one associated to the specific measure selected */\r\n/* they are ordered chronologically with sortedfilteredAnno and the onClick funciton is attacehd to the annotation item's body to highlight the annotated section of the score*/\r\n\r\nimport React from \"react\";\r\nimport AnnotationItem from \"./annotationItem\";\r\n//import PropTypes from \"prop-types\";\r\nexport class AnnotationList extends React.Component {\r\n  state = {\r\n    order: \"desc\",\r\n  };\r\n\r\n  render() {\r\n    const { order } = this.state;\r\n    const filtering = this.props.allEntries.filter((anno) =>\r\n      this.props.filteringEntries.includes(anno[\"@id\"])\r\n    );\r\n    const sortedFilteredAnno = filtering.sort((a, b) => {\r\n      const isReverse = order === \"asc\" ? 1 : -1;\r\n      return isReverse * a.created.localeCompare(b.created);\r\n    });\r\n\r\n    function onClick(e) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      console.log(\"i am being clicked\");\r\n      // figure out this element's focus Id\r\n      const focusId = Array.from(e.currentTarget.classList).filter((c) =>\r\n        c.startsWith(\"focus-\")\r\n      );\r\n      if (focusId.length > 1) {\r\n        console.warn(\"Element with multiple focus Ids!\", e.target);\r\n      }\r\n      // remove focus off previous inFocus elements (now outdated)\r\n      const noLongerInFocusList = Array.from(\r\n        document.getElementsByClassName(\"inFocus\")\r\n      );\r\n      noLongerInFocusList.forEach((noFocusElement) =>\r\n        noFocusElement.classList.remove(\"inFocus\")\r\n      );\r\n      // add focus to newly inFocus elements\r\n      const inFocusList = Array.from(\r\n        document.getElementsByClassName(focusId[0])\r\n      );\r\n      inFocusList.forEach((focusElement) =>\r\n        focusElement.classList.add(\"inFocus\")\r\n      );\r\n      // scroll page to highlighted item\r\n      // document\r\n      //   .querySelector(\".inFocus\")\r\n      //   .scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n\r\n    return (\r\n      <div className=\"listContainer\" id=\"listContainer\">\r\n        {sortedFilteredAnno.map((item) => {\r\n          const annoIdFragment = item[\"@id\"].substr(\r\n            item[\"@id\"].lastIndexOf(\"/\") + 1\r\n          );\r\n          return (\r\n            <div\r\n              className={\"focus-\" + annoIdFragment}\r\n              onClick={onClick}\r\n              key={item[\"@id\"]}\r\n            >\r\n              <AnnotationItem\r\n                annotation={item}\r\n                onAnnoReplyHandler={this.props.onAnnoReplyHandler}\r\n                onMediaClick={this.props.onMediaClick}\r\n                replyAnnotationTarget={this.props.replyAnnotationTarget}\r\n                showReplyHandler={this.props.showReplyHandler}\r\n                areRepliesVisible={this.props.areRepliesVisible}\r\n              />\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// AnnotationList.propTypes = {\r\n//   entries: PropTypes.array.isRequired,\r\n// };\r\n\r\nexport default AnnotationList;\r\n","import React, { Component } from \"react\";\r\nimport SelectableScore from \"selectable-score/lib/selectable-score\";\r\nimport NextPageButton from \"selectable-score/lib/next-page-button.js\";\r\nimport PrevPageButton from \"selectable-score/lib/prev-page-button.js\";\r\nimport AnnotationSubmitter from \"../annotations/annotationSubmitter.js\";\r\nimport SelectionHandler from \"../annotations/selectionHandler.js\";\r\nimport AnnotationList from \"../annotations/annotationList.js\";\r\nimport ReactPlayer from \"react-player\";\r\nimport Modal from \"react-modal\";\r\n\r\n//Modal.setAppElement(\"root\");\r\n//\r\nconst vAdjust = 26; // num. pixels to nudge down anno measureBoxes\r\n\r\nexport default class SelectableScoreApp extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      selection: [],\r\n      annotationType: \"describing\",\r\n      placeholder: \"Add your annotation...\",\r\n      uri:\r\n        \"https://raw.githubusercontent.com/trompamusic-encodings/Mahler_Symphony_No4_Doblinger-4hands/master/Mahler_No4_1-Doblinger-4hands.mei\",\r\n      selectorString: \"\",\r\n      buttonContent: \"Submit to your Solid POD\",\r\n      replyAnnotationTarget: [],\r\n      currentAnnotation: [],\r\n      toggleAnnotationRetrieval: false,\r\n      hasContent: true,\r\n      isClicked: false,\r\n      showMEIInput: true,\r\n      currentMedia: this.props.currentMedia || \"\",\r\n      seekTo: \"\",\r\n      measuresToAnnotationsMap: {},\r\n      annoToDisplay: [],\r\n      helpWindowIsActive: false,\r\n      replyAnnotationTargetId: \"\",\r\n      areRepliesVisible: false,\r\n      vrvOptions: {\r\n        scale: 45,\r\n        adjustPageHeight: 1,\r\n        pageHeight: 2500,\r\n        pageWidth: 2000,\r\n        footer: \"none\",\r\n        unit: 6,\r\n      },\r\n    };\r\n    this.handleSelectionChange = this.handleSelectionChange.bind(this);\r\n    this.handleScoreUpdate = this.handleScoreUpdate.bind(this);\r\n    this.handleStringChange = this.handleStringChange.bind(this);\r\n    this.onResponse = this.onResponse.bind(this);\r\n    this.onRefreshClick = this.onRefreshClick.bind(this);\r\n    this.onReceiveAnnotationContainerContent = this.onReceiveAnnotationContainerContent.bind(\r\n      this\r\n    );\r\n    this.onSubmitMEI = this.onSubmitMEI.bind(this);\r\n    this.onMEIInputChange = this.onMEIInputChange.bind(this);\r\n    this.hideMEIInput = this.hideMEIInput.bind(this);\r\n    this.onAnnoTypeChange = this.onAnnoTypeChange.bind(this);\r\n    this.onAnnoReplyHandler = this.onAnnoReplyHandler.bind(this);\r\n    this.convertCoords = this.convertCoords.bind(this);\r\n    this.activateModal = this.activateModal.bind(this);\r\n    this.deactivateModal = this.deactivateModal.bind(this);\r\n    this.onMediaClick = this.onMediaClick.bind(this);\r\n    this.showReplyHandler = this.showReplyHandler.bind(this);\r\n    this.handleAnnoShowingUpdate = this.handleAnnoShowingUpdate.bind(this);\r\n    this.zoomIn = this.zoomIn.bind(this);\r\n    this.zoomOut = this.zoomOut.bind(this);\r\n    this.player = React.createRef();\r\n  }\r\n\r\n  zoomIn() {\r\n    let step = 5;\r\n    let initialZoom = this.state.vrvOptions.scale;\r\n    let initialHeight = this.state.vrvOptions.pageHeight;\r\n    let initialWidth = this.state.vrvOptions.pageWidth;\r\n    //   vrvOptions.scale = vrvOptions.scale + step;\r\n    //   vrvOptions.pageHeight = (pageHeight * 100) / vrvOptions.scale;\r\n    //   vrvOptions.pageWidth = (pageWidth * 100) / vrvOptions.scale;\r\n    //\r\n    const newVrvOptions = Object.assign({}, this.state.vrvOptions);\r\n    newVrvOptions.scale = initialZoom + step;\r\n    newVrvOptions.pageHeight = (initialHeight / 65) * newVrvOptions.scale;\r\n    newVrvOptions.pageWidth = (initialWidth / 65) * newVrvOptions.scale;\r\n    console.log(\r\n      \"ZOOM INCREASE\",\r\n      newVrvOptions.scale,\r\n      \"page w\",\r\n      newVrvOptions.pageWidth,\r\n      \"page h\",\r\n      newVrvOptions.pageHeight\r\n    );\r\n    this.setState({ vrvOptions: newVrvOptions });\r\n  }\r\n\r\n  zoomOut() {\r\n    let step = 5;\r\n    let initialZoom = this.state.vrvOptions.scale;\r\n    let initialHeight = this.state.vrvOptions.pageHeight;\r\n    let initialWidth = this.state.vrvOptions.pageWidth;\r\n    //   vrvOptions.scale = vrvOptions.scale + step;\r\n    //   vrvOptions.pageHeight = (pageHeight * 100) / vrvOptions.scale;\r\n    //   vrvOptions.pageWidth = (pageWidth * 100) / vrvOptions.scale;\r\n    //\r\n    const newVrvOptions = Object.assign({}, this.state.vrvOptions);\r\n    newVrvOptions.scale = initialZoom - step;\r\n    newVrvOptions.pageHeight = (initialHeight * 65) / newVrvOptions.scale;\r\n    newVrvOptions.pageWidth = (initialWidth * 65) / newVrvOptions.scale;\r\n    console.log(\r\n      \"ZOOM DECREASE\",\r\n      newVrvOptions.scale,\r\n      \"page w\",\r\n      newVrvOptions.pageWidth,\r\n      \"page h\",\r\n      newVrvOptions.pageHeight\r\n    );\r\n    this.setState({ vrvOptions: newVrvOptions });\r\n  }\r\n  showReplyHandler = () => {\r\n    this.setState({ areRepliesVisible: !this.state.areRepliesVisible });\r\n  };\r\n  activateModal = () => {\r\n    this.setState({ helpWindowIsActive: true });\r\n  };\r\n\r\n  deactivateModal = () => {\r\n    this.setState({ helpWindowIsActive: false });\r\n  };\r\n\r\n  convertCoords(elem) {\r\n    if (\r\n      document.getElementById(elem.getAttribute(\"id\")) &&\r\n      elem.style.display !== \"none\" &&\r\n      (elem.getBBox().x !== 0 || elem.getBBox().y !== 0)\r\n    ) {\r\n      const x = elem.getBBox().x;\r\n      const width = elem.getBBox().width;\r\n      const y = elem.getBBox().y;\r\n      const height = elem.getBBox().height;\r\n      const offset = elem.closest(\"svg\").parentElement.getBoundingClientRect();\r\n      const matrix = elem.getScreenCTM();\r\n      return {\r\n        x: matrix.a * x + matrix.c * y + matrix.e - offset.left,\r\n        y: matrix.b * x + matrix.d * y + matrix.f - offset.top,\r\n        x2: matrix.a * (x + width) + matrix.c * y + matrix.e - offset.left,\r\n        y2: matrix.b * x + matrix.d * (y + height) + matrix.f - offset.top,\r\n      };\r\n    } else {\r\n      console.warn(\"Element unavailable on page: \", elem.getAttribute(\"id\"));\r\n      return { x: 0, y: 0, x2: 0, y2: 0 };\r\n    }\r\n  }\r\n\r\n  onAnnoTypeChange = (e) =>\r\n    this.setState({\r\n      annotationType: e.target.value,\r\n      placeholder: e.target.placeholder,\r\n      buttonContent: \"Submit to your Solid POD\",\r\n    });\r\n\r\n  handleStringChange(selectorString) {\r\n    this.setState({ selectorString }, () =>\r\n      console.log(this.state.selectorString)\r\n    );\r\n  }\r\n\r\n  handleSelectionChange(selection) {\r\n    this.setState({ selection });\r\n    /* and anything else your app needs to do when the selection changes */\r\n  }\r\n\r\n  onMEIInputChange = (e) => {\r\n    this.setState({ uri: e.target.value });\r\n  };\r\n\r\n  hideMEIInput() {\r\n    this.setState({ showMEIInput: !this.state.showMEIInput });\r\n  }\r\n  //////////// NEEDS TO WIPE TARGET REPLY AFTER RPELYING TO IT ALSO THE ANNOTATION TYPE HANDLING IS MESSY //////////////////\r\n  onAnnoReplyHandler(replyTarget, replyTargetId) {\r\n    this.setState({\r\n      annotationType: \"replying\",\r\n      placeholder: \"you are replying to the selected annotation\",\r\n      buttonContent: \"Reply to selected Solid annotation\",\r\n      replyAnnotationTarget: replyTarget,\r\n      replyAnnotationTargetId: replyTargetId,\r\n    });\r\n  }\r\n\r\n  onSubmitMEI = () => {\r\n    this.setState(\r\n      {\r\n        isClicked: true,\r\n      },\r\n      () => {\r\n        this.hideMEIInput();\r\n      }\r\n    );\r\n  };\r\n\r\n  onResponse(resp) {\r\n    console.log(resp);\r\n    if (resp.status === 201) {\r\n      this.setState(\r\n        {\r\n          toggleAnnotationRetrieval: true,\r\n        },\r\n        () => {\r\n          this.setState({\r\n            toggleAnnotationRetrieval: false,\r\n            annotationType: \"describing\",\r\n            replyAnnotationTarget: [],\r\n            replyAnnotationTargetId: \"\",\r\n            placeholder: \"Add your annotation...\",\r\n            annoToDisplay: [],\r\n          });\r\n        }\r\n      );\r\n    } else if (resp.status === 404) {\r\n      alert(\"folder not found, check your annotation container path!\");\r\n    }\r\n  }\r\n\r\n  onRefreshClick() {\r\n    if (this.state.hasContent === false) {\r\n      return;\r\n    } else\r\n      this.setState(\r\n        {\r\n          toggleAnnotationRetrieval: true,\r\n        },\r\n        () => {\r\n          this.setState({\r\n            toggleAnnotationRetrieval: false,\r\n            annotationType: \"describing\",\r\n            replyAnnotationTarget: [],\r\n            replyAnnotationTargetId: \"\",\r\n            placeholder: \"Add your annotation...\",\r\n            annoToDisplay: [],\r\n          });\r\n        }\r\n      );\r\n  }\r\n\r\n  onMediaClick(bodyMedia) {\r\n    console.log(\"button click\", bodyMedia);\r\n    //appends http fragment to avoid partial linking error\r\n    //const mediaCue = bodies[0][\"id\"];\r\n    // TODO validate properly\r\n    const currentMedia = bodyMedia.split(\"#\")[0];\r\n    const seekTo = bodyMedia.split(\"#\")[1].replace(\"t=\", \"\");\r\n    console.log(\"Setting up seek to: \", currentMedia, seekTo);\r\n    this.setState({ currentMedia }, () => this.player.current.seekTo(seekTo));\r\n  }\r\n\r\n  onReceiveAnnotationContainerContent(content) {\r\n    if (!content || !content.length) {\r\n      alert(\"no annotation to retrieve\");\r\n      const noLongerInFocusList = Array.from(\r\n        document.getElementsByClassName(\"inFocus\")\r\n      );\r\n      noLongerInFocusList.forEach((noFocusElement) =>\r\n        noFocusElement.classList.remove(\"inFocus\")\r\n      );\r\n      document.querySelectorAll(\".measureBox\").forEach((mb) => mb.remove());\r\n      document\r\n        .querySelectorAll(\".measureBoxBackground\")\r\n        .forEach((mb) => mb.remove());\r\n      this.setState(\r\n        {\r\n          hasContent: false,\r\n        },\r\n        () => {\r\n          console.log(this.state.hasContent);\r\n          this.setState({ hasContent: true });\r\n        }\r\n      );\r\n    }\r\n    // FIXME: Validate that these are (TROMPA?) Web Annotations\r\n    content = content.filter((c) => c[\"@id\"].endsWith(\".jsonld\"));\r\n\r\n    let measuresToAnnotationsMapList = content.map((anno) => {\r\n      let distinctMeasures = [];\r\n      // replying annotations don't have distinct measures since they target\r\n      // annotations, *not* MEI elements\r\n      if (anno.motivation !== \"replying\") {\r\n        const measures = anno.target\r\n          .map((jsonTarget) => {\r\n            const targetId = jsonTarget.id;\r\n            const fragment = targetId.substr(targetId.lastIndexOf(\"#\"));\r\n            const element = document.querySelector(fragment);\r\n            let measure = \"\";\r\n            if (element) {\r\n              measure = element.closest(\".measure\");\r\n            }\r\n            return measure;\r\n          })\r\n          .filter((el) => el); // ensure element exists on screen\r\n        distinctMeasures = [...new Set(measures)];\r\n      }\r\n      return { annoId: anno[\"@id\"], measures: distinctMeasures };\r\n    });\r\n    let newMap = {};\r\n    measuresToAnnotationsMapList.forEach((measureToAnnoMap) => {\r\n      measureToAnnoMap.measures.forEach((m) => {\r\n        const mId = m.getAttribute(\"id\");\r\n        if (mId in newMap) {\r\n          newMap[mId].push(measureToAnnoMap.annoId);\r\n        } else {\r\n          newMap[mId] = [measureToAnnoMap.annoId];\r\n        }\r\n      });\r\n    });\r\n\r\n    this.setState(\r\n      { currentAnnotation: content, measuresToAnnotationsMap: newMap },\r\n      () => {\r\n        const noLongerInFocusList = Array.from(\r\n          document.getElementsByClassName(\"inFocus\")\r\n        );\r\n        noLongerInFocusList.forEach((noFocusElement) =>\r\n          noFocusElement.classList.remove(\"inFocus\")\r\n        );\r\n        // delete any existing measure boxes so we can redraw from blank slate\r\n        document.querySelectorAll(\".measureBox\").forEach((mb) => mb.remove());\r\n        document\r\n          .querySelectorAll(\".measureBoxBackground\")\r\n          .forEach((mb) => mb.remove());\r\n        console.log(\"Mapped annotaitons \", newMap);\r\n        console.log(\"current annotations \", content);\r\n        // draw bounding boxes for all measures containing annotations\r\n        const annotatedMeasuresOnScreen = Object.keys(\r\n          this.state.measuresToAnnotationsMap\r\n        ).filter(\r\n          (measureId) => document.querySelectorAll(\"#\" + measureId).length\r\n        );\r\n        console.log(\r\n          \"Annotated measures on screen: \",\r\n          annotatedMeasuresOnScreen\r\n        );\r\n        annotatedMeasuresOnScreen.forEach((measureId) => {\r\n          const coords = this.convertCoords(\r\n            document.querySelector(\"#\" + measureId)\r\n          );\r\n          console.log(\"Coords: \", coords);\r\n          const measureBox = document.createElement(\"div\");\r\n          const measureBoxBackground = document.createElement(\"div\");\r\n\r\n          const coordsBox = {\r\n            left: Math.floor(coords.x),\r\n            top: Math.floor(coords.y) + vAdjust,\r\n            width: Math.ceil(coords.x2 - coords.x),\r\n            height: Math.ceil(coords.y2 - coords.y),\r\n          };\r\n          console.log(\"Coords box: \", coordsBox);\r\n          measureBox.setAttribute(\"id\", \"measureBox-\" + measureId);\r\n          measureBox.setAttribute(\"class\", \"measureBox\");\r\n          measureBox.setAttribute(\r\n            \"style\",\r\n            \"position: absolute;\" +\r\n              \"background: rgba(0, 0, 0, 0);\" +\r\n              \"left: \" +\r\n              coordsBox.left +\r\n              \"px;\" +\r\n              \"top: \" +\r\n              coordsBox.top +\r\n              \"px;\" +\r\n              \"width: \" +\r\n              coordsBox.width +\r\n              \"px;\" +\r\n              \"height: \" +\r\n              coordsBox.height +\r\n              \"px;\" +\r\n              \"z-index: 1\"\r\n          );\r\n\r\n          measureBoxBackground.setAttribute(\r\n            \"id\",\r\n            \"measureBoxBackground-\" + measureId\r\n          );\r\n          measureBoxBackground.setAttribute(\"class\", \"measureBoxBackground\");\r\n          measureBoxBackground.classList.remove(\"isOpen\");\r\n          measureBoxBackground.classList.add(\"isClosed\");\r\n          measureBoxBackground.setAttribute(\r\n            \"style\",\r\n            \"position: absolute;\" +\r\n              // \"background: rgba(241, 145, 0, 0.25);\" +\r\n              // \"border:1px solid orange;\" +\r\n              \"left: \" +\r\n              coordsBox.left +\r\n              \"px;\" +\r\n              \"top: \" +\r\n              coordsBox.top +\r\n              \"px;\" +\r\n              \"width: \" +\r\n              coordsBox.width +\r\n              \"px;\" +\r\n              \"height: \" +\r\n              coordsBox.height +\r\n              \"px;\" +\r\n              \"z-index: -1\"\r\n          );\r\n          console.log(\"TRYING TO DRAW\", measureBox);\r\n          document\r\n            .querySelector(\".annotationBoxesContainer\")\r\n            .appendChild(measureBox);\r\n          document\r\n            .querySelector(\".annotationBoxesContainer\")\r\n            .appendChild(measureBoxBackground);\r\n\r\n          // FIXME: might need to work more on the onClick interaction\r\n          // e.preventDefault();\r\n          // const isBoxOpen = Array.from(e.currentTarget.classList).filter((c) =>\r\n          //   c.startsWith(\"measureBox\")\r\n          // );\r\n          // if (isBoxOpen.length > 1) {\r\n          //   console.warn(\"too many open boxes\", e.target);\r\n          // }\r\n          // // remove focus off previous inFocus elements (now outdated)\r\n          // const noLongerOpen = Array.from(\r\n          //   document.getElementsByClassName(\"isOpen\")\r\n          // );\r\n          // noLongerOpen.forEach((noFocusElement) =>\r\n          //   noFocusElement.classList.remove(\"isOpen\")\r\n          // );\r\n          // // add focus to newly inFocus elements\r\n          // const inOpenList = Array.from(\r\n          //   document.getElementsByClassName(isBoxOpen[0])\r\n          // );\r\n          // inOpenList.forEach((focusElement) =>\r\n          //   focusElement.classList.add(\"isOpen\")\r\n          // );\r\n\r\n          measureBox.onclick = (e) => {\r\n            const noLongerInFocusList = Array.from(\r\n              document.getElementsByClassName(\"inFocus\")\r\n            );\r\n            noLongerInFocusList.forEach((noFocusElement) =>\r\n              noFocusElement.classList.remove(\"inFocus\")\r\n            );\r\n            const bgBoxes = document.querySelectorAll(\".measureBoxBackground\");\r\n            const frontBox = e.target.closest(\".measureBox\");\r\n            bgBoxes.forEach((box) => {\r\n              box.classList.add(\"isClosed\");\r\n              box.classList.remove(\"isOpen\");\r\n              const bgBoxId = box.id.split(\"measureBoxBackground-\")[1];\r\n              const frontBoxId = frontBox.id.split(\"measureBox-\")[1];\r\n\r\n              if (frontBoxId === bgBoxId) {\r\n                box.classList.remove(\"isClosed\");\r\n                box.classList.add(\"isOpen\");\r\n                // box.setAttribute(\r\n                //   \"style\",\r\n                //   \"position: absolute;\" +\r\n                //     \"background: rgb(255, 255, 255);\" +\r\n                //     \"border:1px solid orange;\" +\r\n                //     \"left: \" +\r\n                //     coordsBox.left +\r\n                //     \"px;\" +\r\n                //     \"top: \" +\r\n                //     coordsBox.top +\r\n                //     \"px;\" +\r\n                //     \"width: \" +\r\n                //     coordsBox.width +\r\n                //     \"px;\" +\r\n                //     \"height: \" +\r\n                //     coordsBox.height +\r\n                //     \"px;\" +\r\n                //     \"z-index: -1\"\r\n                // );\r\n              }\r\n            });\r\n\r\n            const noLongerShowing = Array.from(\r\n              document.getElementsByClassName(\"showReply\")\r\n            );\r\n            console.log(\"no longer showing \", noLongerShowing);\r\n            //hides them\r\n            if (noLongerShowing.length) {\r\n              //const replyHolder = document.createElement(\"div\");\r\n              if (this.state.areRepliesVisible === true) {\r\n                this.setState({ areRepliesVisible: false });\r\n              }\r\n              const annoContainer = document.querySelector(\".listContainer\");\r\n              console.log(annoContainer);\r\n              //annoContainer.appendChild(replyHolder);\r\n              noLongerShowing.forEach((noReplyShowing) => {\r\n                noReplyShowing.classList.add(\"hiddenReply\");\r\n                annoContainer.appendChild(noReplyShowing);\r\n              });\r\n              noLongerShowing.forEach((noReplyShowing) =>\r\n                noReplyShowing.classList.remove(\"showReply\")\r\n              );\r\n            }\r\n            this.handleAnnoShowingUpdate(content, measureId);\r\n          };\r\n        });\r\n      }\r\n    );\r\n    console.log(\"iteration succeded\");\r\n\r\n    content.forEach((anno) => {\r\n      if (anno.motivation !== \"replying\") {\r\n        anno.target.forEach((jsonTarget) => {\r\n          const bodies = anno.body;\r\n          const targetId = jsonTarget.id;\r\n          const fragment = targetId.substr(targetId.lastIndexOf(\"#\"));\r\n          const element = document.querySelector(fragment);\r\n          if (!element) {\r\n            return console.warn(\"no content has been found\");\r\n          }\r\n          const annoId = anno[\"@id\"];\r\n          const annoIdFragment = annoId.substr(annoId.lastIndexOf(\"/\") + 1);\r\n          //checks what's the motivation of the target\r\n          switch (anno.motivation) {\r\n            case \"describing\":\r\n              if (bodies.length) {\r\n                if (\"value\" in bodies[0]) {\r\n                  // const title = document.createElementNS(\r\n                  //   \"http://www.w3.org/2000/svg\",\r\n                  //   \"title\"\r\n                  // );\r\n                  // Embeds the annotation text into this title node\r\n                  //title.innerHTML = bodies[0][\"value\"];\r\n                  //element.insertBefore(title, element.firstChild);\r\n                  //element.classList.add(anno.anno.motivation);\r\n                  element.classList.add(\"focus-\" + annoIdFragment);\r\n                }\r\n              }\r\n              break;\r\n            case \"linking\":\r\n              if (bodies.length) {\r\n                // make the target clickable, linking to the (first) body URI\r\n                // element.addEventListener(\r\n                //   \"click\",\r\n                //   function () {\r\n                //     //appends http fragment to avoid partial linking error\r\n                //     const URL = bodies[0][\"id\"];\r\n                //     if (URL.startsWith(\"http\")) {\r\n                //       window.open(URL, \"_blank\");\r\n                //     } else {\r\n                //       const appendURL = \"https://\" + URL;\r\n                //       window.open(appendURL, \"_blank\");\r\n                //     }\r\n                //   },\r\n                //   true\r\n                // );\r\n                // and turn the cursor into a pointer as a hint that it's clickable\r\n                element.classList.add(\"focus-\" + annoIdFragment);\r\n                //element.classList.add(anno.anno.motivation);\r\n                element.classList.add(\"focus-\" + annoIdFragment);\r\n              }\r\n              break;\r\n            case \"trompa:cueMedia\":\r\n              if (bodies.length) {\r\n                // make the target clickable, seeking player to the (first) body media cue\r\n                // element.onMediaClick = () => {\r\n                //   //appends http fragment to avoid partial linking error\r\n                //   const mediaCue = bodies[0][\"id\"];\r\n                //   // TODO validate properly\r\n                //   const currentMedia = mediaCue.split(\"#\")[0];\r\n                //   const seekTo = mediaCue.split(\"#\")[1].replace(\"t=\", \"\");\r\n                //   console.log(\"Setting up seek to: \", currentMedia, seekTo);\r\n                //   this.setState({ currentMedia }, () =>\r\n                //     this.player.current.seekTo(seekTo)\r\n                //   );\r\n                // };\r\n                // and turn the cursor into a pointer as a hint that it's clickable\r\n                element.classList.add(\"focus-\" + annoIdFragment);\r\n                //element.classList.add(\"cueMedia\");\r\n              }\r\n              break;\r\n            case \"trompa:cueImage\":\r\n              if (bodies.length) {\r\n                element.classList.add(\"focus-\" + annoIdFragment);\r\n                //element.classList.add(\"cueMedia\");\r\n              }\r\n              break;\r\n            default:\r\n              console.log(\r\n                \"sorry, don't know what to do for this annotation boss\"\r\n              );\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n  handleAnnoShowingUpdate(content, measureId) {\r\n    let _annoIds = content.map((jsonIds) => {\r\n      const annotationsIds = jsonIds[\"@id\"];\r\n      return annotationsIds;\r\n    });\r\n    let _filteredAnnoIds = this.state.measuresToAnnotationsMap[measureId];\r\n    let compare = _annoIds.filter((anno) => _filteredAnnoIds.includes(anno));\r\n    // compare has all annotation IDs *for our measure*\r\n    // we want those, PLUS all replying annotations (which aren't tied to measures)\r\n    const annotationsToDisplay = [\r\n      ...compare,\r\n      ...content\r\n        .filter((anno) => anno.motivation === \"replying\") // get the replies\r\n        .map((anno) => anno[\"@id\"]), // and return their IDs\r\n    ];\r\n    console.log(\"to display: \", annotationsToDisplay);\r\n    this.setState({\r\n      annoToDisplay: annotationsToDisplay,\r\n    });\r\n  }\r\n  handleScoreUpdate(scoreElement) {\r\n    console.log(\"Received updated score DOM element: \", scoreElement);\r\n  }\r\n\r\n  render() {\r\n    const modal = this.state.helpWindowIsActive ? (\r\n      <Modal\r\n        isOpen={this.state.helpWindowIsActive}\r\n        onRequestClose={this.deactivateModal}\r\n        contentLabel=\"my modal\"\r\n        className=\"mymodal\"\r\n        overlayClassName=\"myoverlay\"\r\n        ariaHideApp={false}\r\n      >\r\n        <div>\r\n          <header className=\"modal-header\">\r\n            <h2 className=\"modal-title\">This modal has a title</h2>\r\n          </header>\r\n          <div className=\"modal-body\">\r\n            <p>Subtitle</p>\r\n            <div style={{ height: 200, overflow: \"auto\" }}>\r\n              <h3>Internally Scrolling Region</h3>\r\n              <p>\r\n                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\r\n                eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\r\n                enim ad minim veniam, quis nostrud exercitation ullamco laboris\r\n                nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\r\n                in reprehenderit in voluptate velit esse cillum dolore eu fugiat\r\n                nulla pariatur. Excepteur sint occaecat cupidatat non proident,\r\n                sunt in culpa qui officia deserunt mollit anim id est laborum.\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <footer className=\"modal-footer\">\r\n            <button onClick={this.deactivateModal}>deactivate modal</button>\r\n          </footer>\r\n        </div>\r\n      </Modal>\r\n    ) : (\r\n      false\r\n    );\r\n    return (\r\n      <div>\r\n        {this.state.isClicked === true && (\r\n          <div className=\"score\">\r\n            <div className=\"prevPageButton\">\r\n              <PrevPageButton\r\n                buttonContent={<span>Previous page</span>}\r\n                uri={this.state.uri}\r\n              />\r\n            </div>\r\n            <button onClick={this.zoomOut} style={{ marginRight: \"15px\" }}>\r\n              zoom out\r\n            </button>\r\n            {/* <div className=\"divider\"></div> */}\r\n            {/* pass anything as buttonContent that you'd like to function as a clickable next page button */}\r\n            <button onClick={this.zoomIn} style={{ marginLeft: \"15px\" }}>\r\n              zoom in\r\n            </button>\r\n            <div className=\"nextPageButton\">\r\n              <NextPageButton\r\n                buttonContent={<span>Next page</span>}\r\n                uri={this.state.uri}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"annotationBoxesContainer\" />\r\n            <SelectableScore\r\n              uri={this.state.uri}\r\n              annotationContainerUri={this.props.submitUri}\r\n              vrvOptions={this.state.vrvOptions}\r\n              onSelectionChange={this.handleSelectionChange}\r\n              selectorString={this.state.selectorString}\r\n              onScoreUpdate={this.handleScoreUpdate}\r\n              onReceiveAnnotationContainerContent={\r\n                this.onReceiveAnnotationContainerContent\r\n              }\r\n              toggleAnnotationRetrieval={this.state.toggleAnnotationRetrieval}\r\n            />\r\n          </div>\r\n        )}\r\n        {this.state.showMEIInput && (\r\n          <div>\r\n            <p>Select your MEI file:</p>\r\n            <input\r\n              type=\"text\"\r\n              onChange={this.onMEIInputChange}\r\n              placeholder=\"mahler four hands rendition...\"\r\n              className=\"sizedTextBox\"\r\n            />\r\n\r\n            <input\r\n              title=\"click to render the linked MEI file\"\r\n              className=\"MEIButton\"\r\n              type=\"button\"\r\n              onClick={this.onSubmitMEI}\r\n              value=\"render\"\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/*selector for the component selection*/}\r\n        <SelectionHandler\r\n          selectorString={this.state.selectorString}\r\n          handleStringChange={this.handleStringChange}\r\n        />\r\n        {/*annotation submission component*/}\r\n        <AnnotationSubmitter\r\n          onAnnoTypeChange={this.onAnnoTypeChange}\r\n          uri={this.state.uri}\r\n          submitUri={this.props.submitUri}\r\n          selection={this.state.selection}\r\n          onResponse={this.onResponse}\r\n          onRefreshClick={this.onRefreshClick}\r\n          annotationType={this.state.annotationType}\r\n          placeholder={this.state.placeholder}\r\n          replyAnnotationTarget={this.state.replyAnnotationTarget}\r\n          buttonContent={this.state.buttonContent}\r\n          creator={this.props.userId}\r\n          selectorString={this.state.selectorString}\r\n          replyAnnotationTargetId={this.state.replyAnnotationTargetId}\r\n          replyAnnoBody={this.state.replyAnnoBody}\r\n        />\r\n        {/*as buttonContent that you'd like to function as a clickable prev page\r\n        button */}\r\n\r\n        <AnnotationList\r\n          allEntries={this.state.currentAnnotation}\r\n          filteringEntries={this.state.annoToDisplay}\r\n          onAnnoReplyHandler={this.onAnnoReplyHandler}\r\n          onMediaClick={this.onMediaClick}\r\n          replyAnnotationTarget={this.state.replyAnnotationTarget}\r\n          showReplyHandler={this.showReplyHandler}\r\n          areRepliesVisible={this.state.areRepliesVisible}\r\n        />\r\n        <div>\r\n          <button\r\n            onClick={this.activateModal}\r\n            style={{ padding: \"5px\", marginTop: \"5px\" }}\r\n          >\r\n            help\r\n          </button>\r\n          {modal}\r\n        </div>\r\n        {/* <OrchestralRibbon uri={this.state.testuri} width={500} height={600} /> */}\r\n\r\n        <ReactPlayer\r\n          playing\r\n          ref={this.player}\r\n          url={this.state.currentMedia}\r\n          controls={true}\r\n          onReady={() => {\r\n            if (this.state.seekTo) {\r\n              console.log(\"Seeking to: \", this.state.seekTo);\r\n              this.player.current.seekTo(Math.floor(this.state.seekTo));\r\n              this.setState({ seekTo: \"\" });\r\n            }\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { useState } from \"react\";\r\nimport data from \"@solid/query-ldflex\";\r\n\r\nimport {\r\n  LoginButton,\r\n  LogoutButton,\r\n  Value,\r\n  LoggedIn,\r\n  LoggedOut,\r\n  useLDflexValue,\r\n} from \"@solid/react\";\r\n\r\nimport SelectableScoreApp from \"./selectableScoreApp\";\r\nimport Logo from \"../graphics/top-bar-logo_0_0.png\";\r\n\r\nexport default function SolidWrapper(props) {\r\n  data.context.extend({\r\n    trompa: \"http://vocab.trompamusic.eu/vocab#\",\r\n  });\r\n  const userPOD = useLDflexValue(\"user.storage\");\r\n  const userId = useLDflexValue(\"user\");\r\n  const [userInput, setUserInput] = useState(\"private/\");\r\n  const handleUserInput = (e) => {\r\n    // eslint-disable-next-line\r\n    const containerPath = e.target.value\r\n      ? setUserInput(e.target.value)\r\n      : \"private/\";\r\n  };\r\n  return (\r\n    <div id=\"authWrapper\">\r\n      <LoggedOut>\r\n        <div>\r\n          <a\r\n            href=\"https://trompamusic.eu/\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            <img src={Logo} alt=\"trompa logo\" />\r\n          </a>\r\n          <p>\r\n            <LoginButton className=\"loginButton\" popup=\"auth-popup.html\">\r\n              Log in with Solid\r\n            </LoginButton>\r\n          </p>\r\n        </div>\r\n      </LoggedOut>\r\n      <LoggedIn>\r\n        <a\r\n          href=\"https://trompamusic.eu/\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          <img src={Logo} alt=\"trompa logo\" />\r\n        </a>\r\n        <h2>Music scholars annotation tool</h2>\r\n        <p>\r\n          You are logged in as{\" \"}\r\n          <a href={userId} target=\"_blank\" rel=\"noopener noreferrer\">\r\n            <Value src=\"user.name\" />\r\n          </a>\r\n        </p>\r\n        <p title=\"close the current session and quit the app\">\r\n          <LogoutButton className=\"logoutButton\">Log out</LogoutButton>\r\n        </p>\r\n        <p>Specify the annotation container path inside your Pod:</p>\r\n        <div>\r\n          <input\r\n            title=\"enter your preferred POD folder\"\r\n            type=\"text\"\r\n            placeholder=\"private/\"\r\n            onChange={handleUserInput}\r\n            className=\"sizedTextBox\"\r\n          />\r\n        </div>\r\n        {typeof userPOD !== \"undefined\" ? (\r\n          <SelectableScoreApp\r\n            uri={props.uri}\r\n            //vrvOptions={props.vrvOptions}\r\n            podUri={`${userPOD}`}\r\n            submitUri={`${userPOD}` + userInput}\r\n            userId={`${userId}`}\r\n          />\r\n        ) : (\r\n          <div>Loading... </div>\r\n        )}\r\n      </LoggedIn>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport ReduxPromise from \"redux-promise\";\r\n\r\nimport { reducers } from \"meld-clients-core/lib/reducers\";\r\nimport SolidWrapper from \"./solidWrapper\";\r\n\r\nconst createStoreWithMiddleware = applyMiddleware(\r\n  thunk,\r\n  ReduxPromise\r\n)(createStore);\r\n\r\nexport default class SelectableScoreWrapper extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // MEI_URI: Can be a full URI, e.g. obtained from the TROMPA Contributor Environment\r\n    this.state = {\r\n      MEI_URI: \"Mahler.mei\",\r\n    };\r\n    this.store = createStore(reducers);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Provider store={createStoreWithMiddleware(reducers)}>\r\n        <SolidWrapper\r\n          uri={this.state.MEI_URI}\r\n          //vrvOptions={this.props.vrvOptions}\r\n          handleMEIInput={this.handleMEIInput}\r\n          onChange={this.onChange}\r\n          value={this.state.value}\r\n          // zoomIn={this.props.zoomIn}\r\n          // zoomOut={this.props.zoomOut}\r\n        />\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport SelectableScoreWrapper from \"./containers/selectableScoreWrapper\";\r\n\r\n// Parameters for SelectableScore component\r\n// ****************************************\r\n// MEI_URI: Can be a full URI, e.g. obtained from the TROMPA Contributor Environment\r\n// const MEI_URI = \"test.mei\";\r\n// vrvOptions: If not supplied to <SelectableScore>, will default to predefined options\r\n// var zoom = 45;\r\n// var pageHeight = 1150;\r\n// var pageWidth = 1000;\r\n// var sizedPageWidth = (pageWidth * 100) / zoom;\r\n// var sizedPageHeight = (pageHeight * 100) / zoom;\r\n// const vrvOptions = {\r\n//   scale: zoom,\r\n//   adjustPageHeight: 1,\r\n//   pageHeight: sizedPageHeight,\r\n//   pageWidth: sizedPageWidth,\r\n//   footer: \"none\",\r\n//   unit: 6,\r\n// };\r\n\r\n// function onZoomIncrease() {\r\n//   var step = 10;\r\n//   vrvOptions.scale = vrvOptions.scale + step;\r\n//   vrvOptions.pageHeight = (pageHeight * 100) / vrvOptions.scale;\r\n//   vrvOptions.pageWidth = (pageWidth * 100) / vrvOptions.scale;\r\n//   console.log(\r\n//     \"ZOOM INCREASE\",\r\n//     vrvOptions.scale,\r\n//     \"page w\",\r\n//     vrvOptions.pageWidth,\r\n//     \"page h\",\r\n//     vrvOptions.pageHeight\r\n//   );\r\n// }\r\n\r\n// function onZoomDecrease() {\r\n//   var step = 10;\r\n//   vrvOptions.scale = vrvOptions.scale - step;\r\n//   vrvOptions.pageHeight = (pageHeight * 100) / vrvOptions.scale;\r\n//   vrvOptions.pageWidth = (pageWidth * 100) / vrvOptions.scale;\r\n//   console.log(\r\n//     \"ZOOM DECREASE\",\r\n//     vrvOptions.scale,\r\n//     \"page w\",\r\n//     vrvOptions.pageWidth,\r\n//     \"page h\",\r\n//     vrvOptions.pageHeight\r\n//   );\r\n// }\r\n\r\nReactDOM.render(\r\n  <SelectableScoreWrapper\r\n  // vrvOptions={vrvOptions}\r\n  // zoomIn={onZoomIncrease}\r\n  // zoomOut={onZoomDecrease}\r\n  />,\r\n  document.querySelector(\".container\")\r\n);\r\n"],"sourceRoot":""}